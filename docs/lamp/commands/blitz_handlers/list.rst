list
====

The ``list`` command prints autogenerated Blitz action snippets.

Basic usage
-----------

There are 3 ways to use the ``list`` command:

   * ``list <NUMBER>``: Shows the last 'n' autogenerated snippets.
   * ``list -n <SECTION_NAME>``: Shows autogenerated snippets under a specific test section.
   * ``list -a``: Shows all autogenerated snippets.

list <NUMBER>
--------------

The command ``list 1`` prints the most recent autogenerated Blitz action snippet.

For example, after running any operator command, ``list 1`` will show the
corresponding autogenerated blitz action snippet:

.. code-block:: console

   (lamp-host1) sleep 5
   2024-07-29 16:49:29: %LAMP-INFO: +------------------------------------------------------------------------------+
   2024-07-29 16:49:29: %LAMP-INFO: :                             Sleep for 5 seconds                              :
   2024-07-29 16:49:29: %LAMP-INFO: +------------------------------------------------------------------------------+
   (lamp-host1) list 1
   sleep:
     sleep_time: 5
   (lamp-host1)

Multiple commands can be run in sequence, and ``list <NUMBER>`` will display the
last 'n' snippets in order. For instance, after running three commands:

    * configure no logging console
    * sleep 2
    * execute -i show ip route

``list 3`` will show snippets for all three actions in the order they were run:

.. code-block:: console

   (lamp-host1) configure no logging console
   2024-07-29 16:55:45: %LAMP-INFO: +..............................................................................+
   2024-07-29 16:55:45: %LAMP-INFO: :                  Configure 'no logging console' on 'host1'                   :
   2024-07-29 16:55:45: %LAMP-INFO: +..............................................................................+
   
   2024-07-29 16:55:45,867: %UNICON-INFO: +++ host1 with via 'a': configure +++
   config term
   Enter configuration commands, one per line.  End with CNTL/Z.
   host1(config)#no logging console
   host1(config)#end
   host1#
   (lamp-host1) sleep 2
   2024-07-29 16:55:49: %LAMP-INFO: +------------------------------------------------------------------------------+
   2024-07-29 16:55:49: %LAMP-INFO: :                             Sleep for 2 seconds                              :
   2024-07-29 16:55:49: %LAMP-INFO: +------------------------------------------------------------------------------+
   (lamp-host1) execute -i show ip route
   2024-07-29 16:56:10: %LAMP-INFO: +..............................................................................+
   2024-07-29 16:56:10: %LAMP-INFO: :                      Execute 'show ip route' on 'host1'                      :
   2024-07-29 16:56:10: %LAMP-INFO: +..............................................................................+
   
   2024-07-29 16:56:10,941: %UNICON-INFO: +++ host1 with via 'a': executing command 'show ip route' +++
   show ip route
   Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
          D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
          N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
          E1 - OSPF external type 1, E2 - OSPF external type 2, m - OMP
          n - NAT, Ni - NAT inside, No - NAT outside, Nd - NAT DIA
          i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
          ia - IS-IS inter area, * - candidate default, U - per-user static route
          H - NHRP, G - NHRP registered, g - NHRP registration summary
          o - ODR, P - periodic downloaded static route, l - LISP
          a - application route
          + - replicated route, % - next hop override, p - overrides from PfR
          & - replicated local route overrides by connected
   
   Gateway of last resort is not set
   
         1.0.0.0/32 is subnetted, 1 subnets
   C        1.1.1.1 is directly connected, Loopback30
   host1#
   2024-07-29 16:56:11: %LAMP-INFO: +..............................................................................+
   2024-07-29 16:56:11: %LAMP-INFO: :                                   INCLUDE                                    :
   2024-07-29 16:56:11: %LAMP-INFO: +..............................................................................+
   Enter pattern to INCLUDE (Press enter for multiple patterns): 1.1.1.1
   (lamp-host1)
   (lamp-host1) list 3
   configure:
     device: host1
     command: no logging console
   sleep:
     sleep_time: 2
   execute:
     device: host1
     command: show ip route
     include:
       - 1.1.1.1
   (lamp-host1)

.. note::

    ``list <NUMBER>`` only prints snippets from the current test section. If a new test section is created,
    the autogenerated snippets of the previous test section are no longer available for viewing using ``list <NUMBER>``.

    Example highlighting this behavior:

    .. code-block:: console

      (lamp-host1) list 3
      configure:
        device: host1
        command: no logging console
      sleep:
        sleep_time: 2
      execute:
        device: host1
        command: show ip route
        include:
          - 1.1.1.1
      (lamp-host1)
      (lamp-host1) test_section new
      (lamp-host1) list 1
      (lamp-host1) list 2
      (lamp-host1) list 3
      (lamp-host1)

list -n <SECTION_NAME>
-----------------------

This form of the command displays snippets for a specific test section.

Example:

.. code-block:: console

   (lamp-host1) test_section default
   (lamp-host1) configure no logging console
   2024-07-29 16:55:45: %LAMP-INFO: +..............................................................................+
   2024-07-29 16:55:45: %LAMP-INFO: :                  Configure 'no logging console' on 'host1'                   :
   2024-07-29 16:55:45: %LAMP-INFO: +..............................................................................+
   
   2024-07-29 16:55:45,867: %UNICON-INFO: +++ host1 with via 'a': configure +++
   config term
   Enter configuration commands, one per line.  End with CNTL/Z.
   host1(config)#no logging console
   host1(config)#end
   host1#
   (lamp-host1) test_section new
   (lamp-host1) configure no ip domain lookup
   2024-07-29 17:09:21: %LAMP-INFO: +..............................................................................+
   2024-07-29 17:09:21: %LAMP-INFO: :                  Configure 'no ip domain lookup' on 'host1'                  :
   2024-07-29 17:09:21: %LAMP-INFO: +..............................................................................+
   
   2024-07-29 17:09:21,303: %UNICON-INFO: +++ host1 with via 'a': configure +++
   config term
   Enter configuration commands, one per line.  End with CNTL/Z.
   host1(config)#no ip domain lookup
   host1(config)#end
   host1#
   (lamp-host1) list -n default
   default:
     - configure:
         device: host1
         command: no logging console
   (lamp-host1) list -n new
   new:
     - configure:
         device: host1
         command: no ip domain lookup

list -a
-------

The ``list -a`` command displays all autogenerated snippets from all test sections.
The output is organized by section, showing the corresponding action snippets
under each section.

Example:

.. code-block:: console

   (lamp-host1) list -a
   default:
     - configure:
         device: host1
         command: no logging console
     - sleep:
         sleep_time: 2
     - execute:
         device: host1
         command: show ip route
         include:
           - 1.1.1.1
   new:
     - configure:
         device: host1
         command: no ip domain lookup
   (lamp-host1)