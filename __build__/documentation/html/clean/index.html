

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyATS Clean &mdash; Genie Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/asciinema-player.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/genie_ico.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/asciinema-player.js"></script>
        <script src="../_static/tracker.js"></script>
        <script src="../_static/embed_version.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installation" href="installation/installation.html" />
    <link rel="prev" title="Useful Libraries" href="../userguide/utils/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> pyATS Library: Genie
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/index.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pyATS Clean</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/design.html">Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage/usage.html">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/base_clean_files.html">Base Clean Files</a></li>
<li class="toctree-l2"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../health/index.html">pyATS Health Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Genie Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solutions/index.html">Genie Solutions</a></li>
</ul>
<p class="caption"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">Available APIs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/models">Available Models (Conf/Ops)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">Available Parsers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">Available Triggers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/verifications">Available Verifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../abstract/index.html">Library Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metaparser/index.html">Metaparsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parsergen/index.html">CLI Auto-Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../predcore/index.html">Predicates</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS Library: Genie</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>pyATS Clean</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pyats-clean">
<span id="clean"></span><h1>pyATS Clean<a class="headerlink" href="#pyats-clean" title="Permalink to this headline">¶</a></h1>
<p>Built on top of the pyATS Kleenex infrastructure, pyATS clean library
enables you to restore your testbed’s devices to a known-good state by
loading your specified image and configuration. It can be added to any
existing pyATS script with using just a few additional arguments.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See clean yaml examples <a class="reference internal" href="examples/base_clean_files.html#base-clean-files"><span class="std std-ref">here</span></a></p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Quick start Guide!</span>
<span class="c1"># ------------------</span>
<span class="c1"># 1. Create the clean yaml</span>
<span class="c1"># 2. Add the arguments</span>
<span class="c1"># 3. (Optional) Relax while pyATS Clean takes care of everything</span>

<span class="c1"># Standalone clean</span>
kleenex -testbed_file<span class="o">=</span>/path/to/testbed.yaml -clean_file<span class="o">=</span>/path/to/clean.yaml

<span class="c1"># Integrated with pyATS jobs</span>
pyats run job &lt;job file&gt; --clean-file /path/to/cleam.yaml --invoke-clean
</pre></div>
</div>
<p>You can find many examples in our <a class="reference external" href="https://github.com/CiscoTestAutomation/examples/tree/master/clean">Github repo</a>.</p>
<hr class="docutils" />
<div class="figure align-right">
<a class="reference internal image-reference" href="../_images/structure.png"><img alt="../_images/structure.png" src="../_images/structure.png" style="width: 350px;" /></a>
</div>
<p>Build like Lego building blocks, pyATS clean is highly modular. You can add,
remove and modify any stages, including customizing your own clean stage
anywhere in the process! This gives it the flexibility to support a variety
of platforms, each with its own tailored clean process/portfolio.</p>
<p>pyATS Clean is simplistic, the library is designed so you can use one clean
yaml structure for all your devices - regardless of operating system and platforms.</p>
<hr class="docutils" />
<p>For the first time, Clean logs are now easy to view and debug thanks to Xpresso
and our pyATS Logviewer. The logs and results can be viewed live as the run
happens by adding the <code class="xref py py-obj docutils literal notranslate"><span class="pre">--liveview</span></code> argument to the pyats run command and
visiting <a class="reference external" href="http://localhost:8080/">http://localhost:8080/</a>.</p>
<div class="figure align-center">
<img alt="../_images/logviewer.png" src="../_images/logviewer.png" />
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation/installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation/installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/installation.html#installation-steps">Installation Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="design/design.html">Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="design/design.html#clean-yaml">Clean yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/design.html#clean-stages">Clean Stages</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/design.html#device-recovery">Device Recovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/design.html#supported-platforms">Supported Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/design.html#supported-powercyclers">Supported PowerCyclers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage/usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage/usage.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage/usage.html#integrated">Integrated</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage/usage.html#standalone">Standalone</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage/usage.html#clean-schema-validation">Clean Schema Validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples/base_clean_files.html">Base Clean Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/base_clean_files.html#sanity">Sanity</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/base_clean_files.html#developer">Developer</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/base_clean_files.html#external-user">External User</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation/installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../userguide/utils/index.html" class="btn btn-neutral float-left" title="Useful Libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Cisco Systems Inc.
      <span class="lastupdated">
        Last updated on Dec 22, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>