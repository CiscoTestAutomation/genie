

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Parse devices’ outputs into structured output &mdash; Genie Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/asciinema-player.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/genie_ico.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/asciinema-player.js"></script>
        <script src="../_static/tracker.js"></script>
        <script src="../_static/embed_version.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1. How to install Genie" href="genie.html" />
    <link rel="prev" title="Getting Started" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> pyATS Library: Genie
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#explore-genie">Explore Genie</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1. Parse devices’ outputs into structured output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#learn-devices-features-into-structured-output">2. Learn devices’ features into structured output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-devices-feature-with-python-object">3. Configure devices feature with python object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-api-functions">4. Device API functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#robotframework-library">5. RobotFramework Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-testcases">6. Run Testcases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-parsers">7. Write parsers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#possible-ways-to-use-genie">8. Possible ways to use Genie</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workshops">9. Workshops</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-general">Genie - General</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-command-line">Genie Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-libs-parsers">Genie.libs.parsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-ops">Genie.Ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-conf">Genie.Conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-harness">Genie.Harness</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clean/index.html">pyATS Clean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../health/index.html">pyATS Health Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Genie Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solutions/index.html">Genie Solutions</a></li>
</ul>
<p class="caption"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">Available APIs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/models">Available Models (Conf/Ops)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">Available Parsers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">Available Triggers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/verifications">Available Verifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../abstract/index.html">Library Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metaparser/index.html">Metaparsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parsergen/index.html">CLI Auto-Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../predcore/index.html">Predicates</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS Library: Genie</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Getting Started</a> &raquo;</li>
        
      <li>1. Parse devices’ outputs into structured output</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h2>Explore Genie</h2><p>This page gives a quick overview on how Genie can help you!</p>
<p>To make these demos more interactive you can first <a class="reference internal" href="genie.html#book-genie"><span class="std std-ref">install Genie</span></a> then you can execute each of the exploration recipe.</p>
<p>We are also including <a class="reference internal" href="#book-explore-workshop"><span class="std std-ref">workshops</span></a> which we are
currently presenting at CiscoLive part of DevNet Workshop. It is highly
recommended for you to spend some time and go through them.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Genie is flexible and can be used in multiple ways. Pure python, Robot
libraries and directly in Linux without even knowing any Python.</p>
</div>
<p>Examples can be <a href="#id1"><span class="problematic" id="id2">cloned_</span></a> from: <code class="xref py py-obj docutils literal notranslate"><span class="pre">https://github.com/CiscoTestAutomation/examples/tree/master/libraries</span></code>.</p>
<blockquote>
<div><p>To execute them: cd $VIRTUAL_ENV/examples/</p>
</div></blockquote>
<div class="section" id="parse-devices-outputs-into-structured-output">
<span id="book-explore-1"></span><h1>1. Parse devices’ outputs into structured output<a class="headerlink" href="#parse-devices-outputs-into-structured-output" title="Permalink to this headline">¶</a></h1>
<p>Parsers allows you to parse show commands into structured output
(Json/Dictionary).</p>
<p><strong>Python Example</strong></p>
<i class="fa fa-linux"></i>
<span style='color:#6ab0de'>Bash</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>genie shell --testbed-file testbed.yaml --replay mocked_devices
</pre></div>
</div>
<i class="fa fa-anchor"></i>
<span style='color:#6ab0de'>Python</span><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;nx-osv-1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;nx-osv-1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show version&#39;</span><span class="p">)</span>
<span class="n">output</span>
<span class="c1"># {&#39;platform&#39;: {&#39;hardware&#39;: {&#39;bootflash&#39;: &#39;3184776 kB&#39;,</span>
<span class="c1">#    &#39;chassis&#39;: &#39;NX-OSv Supervisor Module&#39;,</span>
<span class="c1">#    &#39;device_name&#39;: &#39;nx-osv-1&#39;,</span>
<span class="c1">#    &#39;model&#39;: &#39;NX-OSv&#39;,</span>
<span class="c1">#    &#39;processor_board_id&#39;: &#39;TM00010000B&#39;,</span>
<span class="c1">#    &#39;slots&#39;: &#39;None&#39;},</span>
<span class="c1">#   &#39;kernel_uptime&#39;: {&#39;days&#39;: 6, &#39;hours&#39;: 1, &#39;minutes&#39;: 12, &#39;seconds&#39;: 30},</span>
<span class="c1">#   &#39;name&#39;: &#39;Nexus&#39;,</span>
<span class="c1">#   &#39;os&#39;: &#39;NX-OS&#39;,</span>
<span class="c1">#   &#39;software&#39;: {&#39;kickstart_compile_time&#39;: &#39;1/11/2016 16:00:00 [02/11/2016 10:30:12]&#39;,</span>
<span class="c1">#    &#39;kickstart_image_file&#39;: &#39;bootflash:///titanium-d1-kickstart.7.3.0.D1.1.bin&#39;,</span>
<span class="c1">#    &#39;kickstart_version&#39;: &#39;7.3(0)D1(1)&#39;,</span>
<span class="c1">#    &#39;system_compile_time&#39;: &#39;1/11/2016 16:00:00 [02/11/2016 13:08:11]&#39;,</span>
<span class="c1">#    &#39;system_image_file&#39;: &#39;bootflash:///titanium-d1.7.3.0.D1.1.bin&#39;,</span>
<span class="c1">#    &#39;system_version&#39;: &#39;7.3(0)D1(1)&#39;}}}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Run the genie shell command first, which gives a python interpreter</p>
</div>
<p><strong>Linux Example</strong></p>
<i class="fa fa-linux"></i>
<span style='color:#6ab0de'>Bash</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>genie parse <span class="s2">&quot;show version&quot;</span> --testbed-file testbed.yaml --replay mocked_devices --devices nx-osv-1 --output <span class="nv">explore1</span>
<span class="o">+==============================================================================</span>+
<span class="p">|</span> Genie Parse Summary <span class="k">for</span> nx-osv-1                                             <span class="p">|</span>
+<span class="o">==============================================================================</span>+
<span class="p">|</span>  Connected to nx-osv-1                                                       <span class="p">|</span>
<span class="p">|</span>  -  Log: explore-1/connection_nx-osv-1.txt                                   <span class="p">|</span>
<span class="p">|</span>------------------------------------------------------------------------------<span class="p">|</span>
<span class="p">|</span>  Parsed <span class="nb">command</span> <span class="s1">&#39;show version&#39;</span>                                               <span class="p">|</span>
<span class="p">|</span>  -  Parsed structure: explore-1/nx-osv-1_show-version_parsed.txt             <span class="p">|</span>
<span class="p">|</span>  -  Device Console:   explore-1/nx-osv-1_show-version_console.txt            <span class="p">|</span>
<span class="p">|</span>------------------------------------------------------------------------------<span class="p">|</span>
</pre></div>
</div>
<p>There are over <a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/parsers">500+ Parsers</a> existing right now for you to use!</p>
<p>More information on <a class="reference internal" href="parsers.html#book-parser"><span class="std std-ref">Parser</span></a> and <a class="reference internal" href="../cli/index.html#genie-cli"><span class="std std-ref">Genie Cli</span></a>.</p>
</div>
<div class="section" id="learn-devices-features-into-structured-output">
<h1>2. Learn devices’ features into structured output<a class="headerlink" href="#learn-devices-features-into-structured-output" title="Permalink to this headline">¶</a></h1>
<p>Instead of learning a few cli at the time, you can learn the whole feature and
have it into 1 structured output (Json/Dictionary). This structure is agnostic
between all OS (Identical between all the OS).</p>
<p><strong>Python Mode</strong></p>
<i class="fa fa-linux"></i>
<span style='color:#6ab0de'>Bash</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>genie shell --testbed-file testbed.yaml --replay mocked_devices
</pre></div>
</div>
<i class="fa fa-linux"></i>
<span style='color:#6ab0de'>Python</span><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;nx-osv-1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;nx-osv0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="s1">&#39;ospf&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>
<span class="c1"># {</span>
<span class="c1"># &#39;feature_ospf&#39;: True,</span>
<span class="c1"># &#39;vrf&#39;: {</span>
<span class="c1">#   &#39;default&#39;: {</span>
<span class="c1">#     &#39;address_family&#39;: {</span>
<span class="c1">#       &#39;ipv4&#39;: {</span>
<span class="c1">#         &#39;instance&#39;: {</span>
<span class="c1">#           &#39;1&#39;: {</span>
<span class="c1">#             &#39;graceful_restart&#39;: {</span>
<span class="c1">#               &#39;ietf&#39;: {</span>
<span class="c1">#                 &#39;enable&#39;: True,</span>
<span class="c1">#                 &#39;restart_interval&#39;: 60,</span>
<span class="c1">#                 &#39;type&#39;: &#39;ietf&#39;,</span>
<span class="c1">#                 },</span>
<span class="c1">#               },</span>
<span class="c1">#             &#39;enable&#39;: True,</span>
<span class="c1">#             &#39;auto_cost&#39;: {</span>
<span class="c1"># ...</span>
</pre></div>
</div>
<p><strong>Linux Mode</strong></p>
<i class="fa fa-linux"></i>
<span style='color:#6ab0de'>Bash</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>genie learn <span class="s2">&quot;ospf&quot;</span> --testbed-file testbed.yaml --replay mocked_devices --devices nx-osv-1
<span class="c1"># +==============================================================================+</span>
<span class="c1"># | Genie Learn Summary for device nx-osv-1                                      |</span>
<span class="c1"># +==============================================================================+</span>
<span class="c1"># |  Connected to nx-osv-1                                                       |</span>
<span class="c1"># |  -   Log: ./connection_nx-osv-1.txt                                          |</span>
<span class="c1"># |------------------------------------------------------------------------------|</span>
<span class="c1"># |  Learnt feature &#39;ospf&#39;                                                       |</span>
<span class="c1"># |  -  Ops structure:  ./ospf_nxos_nx-osv-1_ops.txt                             |</span>
<span class="c1"># |  -  Device Console: ./ospf_nxos_nx-osv-1_console.txt                         |</span>
<span class="c1"># |==============================================================================|</span>
</pre></div>
</div>
<p><a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/models">All available features</a></p>
<p>More information on <a class="reference internal" href="ops.html#book-ops"><span class="std std-ref">Ops</span></a> and <a class="reference internal" href="../cli/index.html#genie-cli"><span class="std std-ref">Genie Cli</span></a>.</p>
</div>
<div class="section" id="configure-devices-feature-with-python-object">
<h1>3. Configure devices feature with python object<a class="headerlink" href="#configure-devices-feature-with-python-object" title="Permalink to this headline">¶</a></h1>
<p>Genie Conf allows to configure a device with with python object following a
structured object model. This object model is agnostic between all OS.</p>
<p><strong>Python Mode</strong></p>
<i class="fa fa-linux"></i>
<span style='color:#6ab0de'>Python</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>genie shell --testbed-file testbed.yaml --replay mocked_devices
</pre></div>
</div>
<i class="fa fa-anchor"></i>
<span style='color:#6ab0de'>Python</span><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Interface</span>
<span class="n">uut</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">]</span>
<span class="n">uut</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="c1"># Create an NXOS interface</span>
<span class="n">nxos_interface</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="n">uut</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet4/3&#39;</span><span class="p">)</span>
<span class="c1"># Add some configuration</span>
<span class="n">nxos_interface</span><span class="o">.</span><span class="n">ipv4</span> <span class="o">=</span> <span class="s1">&#39;200.1.1.2&#39;</span>
<span class="n">nxos_interface</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">netmask</span> <span class="o">=</span><span class="s1">&#39;255.255.255.0&#39;</span>
<span class="n">nxos_interface</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1"># Verify configuration generated</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nxos_interface</span><span class="o">.</span><span class="n">build_config</span><span class="p">(</span><span class="n">apply</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="c1"># interface Ethernet4/3</span>
<span class="c1">#  no shutdown</span>
<span class="c1">#  ip address 200.1.1.2 255.255.255.0</span>
<span class="c1">#  exit</span>
<span class="n">nxos_interface</span><span class="o">.</span><span class="n">build_config</span><span class="p">()</span> <span class="c1"># To apply on the device</span>
<span class="n">nxos_interface</span><span class="o">.</span><span class="n">build_unconfig</span><span class="p">()</span> <span class="c1"># To remove configuration</span>
</pre></div>
</div>
<p><a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/models">All available features</a></p>
<p>More information on <a class="reference internal" href="conf.html#book-conf"><span class="std std-ref">Conf</span></a>.</p>
</div>
<div class="section" id="device-api-functions">
<h1>4. Device API functions<a class="headerlink" href="#device-api-functions" title="Permalink to this headline">¶</a></h1>
<p>Genie has a set of built in <a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/apis">API functions</a> that can be used to perform various actions including config, verify, get, analyze, and more on the device.
They can be accessed directly with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">device.apis</span></code> method. To use them, simply find
the API name you need, then call the API with it’s argument as:
<code class="xref py py-obj docutils literal notranslate"><span class="pre">device.api.api_name(args_1,</span> <span class="pre">args_2,</span> <span class="pre">....)</span></code></p>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">=</span><span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;My_device&#39;</span><span class="p">]</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">via</span><span class="o">=</span><span class="s1">&#39;cli&#39;</span><span class="p">)</span>
<span class="n">device</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">shut_interface</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="s1">&#39;Loopback0&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above would perform the following action on the device:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config term
Enter configuration commands, one per line.  End with CNTL/Z.
My_device(config)#interface Loopback0
My_device(config-if)#shutdown
My_device(config-if)#end
My_device
</pre></div>
</div>
</div>
</div>
<div class="section" id="robotframework-library">
<h1>5. RobotFramework Library<a class="headerlink" href="#robotframework-library" title="Permalink to this headline">¶</a></h1>
<p>Familiar with <a class="reference external" href="http://robotframework.org/">RobotFramework</a> ? Genie comes with its own <a class="reference internal" href="../userguide/robot/index.html#robot-genie"><span class="std std-ref">Genie
RobotFramework library</span></a>.</p>
<p>Robot example can also be found in our <a class="reference internal" href="../userguide/examples/example.html#example"><span class="std std-ref">Examples</span></a> page as Example 5.</p>
</div>
<div class="section" id="run-testcases">
<h1>6. Run Testcases<a class="headerlink" href="#run-testcases" title="Permalink to this headline">¶</a></h1>
<p>Genie comes with a harness to execute triggers on your devices.</p>
<i class="fa fa-anchor"></i>
<span style='color:#6ab0de'>Bash</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>genie run --testbed-file testbed.yaml <span class="se">\</span>
          --trigger-uids<span class="o">=</span><span class="s2">&quot;And(&#39;TriggerShutNoShutBgp</span>$<span class="s2">&#39;)&quot;</span> <span class="se">\</span>
          --verification-uids<span class="o">=</span><span class="s2">&quot;And(&#39;Verify_BgpProcessVrfAll</span>$<span class="s2">&#39;)&quot;</span> <span class="se">\</span>
          --html_logs . <span class="se">\</span>
          --replay run_mocked_devices
</pre></div>
</div>
<p><a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/triggers">All avaible triggers</a></p>
<p>More information on <a class="reference internal" href="harness.html#book-harness"><span class="std std-ref">Harness</span></a>.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Full log can be accessed from here <a class="reference download internal" download="" href="../_downloads/c090a8ffbdf760bbdbb9f8ea79b06369/TaskLog.html"><code class="xref download docutils literal notranslate"><span class="pre">TaskLog.html</span></code></a>.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="write-parsers">
<h1>7. Write parsers<a class="headerlink" href="#write-parsers" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../parsergen/index.html#parsergen"><span class="std std-ref">Parsergen</span></a> allows to write parser from scratch with just one api call.</p>
<i class="fa fa-anchor"></i>
<span style='color:#6ab0de'>Bash</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>genie shell --testbed-file testbed.yaml --replay mocked_devices
</pre></div>
</div>
<i class="fa fa-linux"></i>
<span style='color:#6ab0de'>Bash</span><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>from genie import parsergen
<span class="nv">uut</span> <span class="o">=</span> testbed.devices<span class="o">[</span><span class="s1">&#39;uut&#39;</span><span class="o">]</span>
uut.connect<span class="o">()</span>
<span class="nv">output</span> <span class="o">=</span> uut.execute<span class="o">(</span><span class="s1">&#39;show interface brief&#39;</span><span class="o">)</span>
<span class="nv">result</span> <span class="o">=</span> parsergen.oper_fill_tabular<span class="o">(</span>
                <span class="nv">header_fields</span><span class="o">=</span> <span class="o">[[</span><span class="s1">&#39;Ethernet&#39;</span>, <span class="s1">&#39;VLAN&#39;</span>, <span class="s1">&#39;Type&#39;</span>, <span class="s1">&#39;Mode&#39;</span>, <span class="s1">&#39;Status&#39;</span>, <span class="s1">&#39;Reason&#39;</span>, <span class="s1">&#39;Speed&#39;</span>, <span class="s1">&#39;Port&#39;</span><span class="o">]</span>,
                                <span class="o">[</span><span class="s1">&#39;Interface&#39;</span>, <span class="s1">&#39;&#39;</span>, <span class="s1">&#39;&#39;</span>, <span class="s1">&#39;&#39;</span>, <span class="s1">&#39;&#39;</span>, <span class="s1">&#39;&#39;</span>, <span class="s1">&#39;&#39;</span>, <span class="s1">&#39;Ch \#&#39;</span><span class="o">]]</span>,
                <span class="nv">label_fields</span><span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Ethernet Interface&#39;</span>, <span class="s1">&#39;VLAN&#39;</span>, <span class="s1">&#39;Type&#39;</span>, <span class="s1">&#39;Mode&#39;</span>, <span class="s1">&#39;Status&#39;</span>, <span class="s1">&#39;Reason&#39;</span>, <span class="s1">&#39;Speed&#39;</span>, <span class="s1">&#39;Port&#39;</span><span class="o">]</span>,
                <span class="nv">device_output</span><span class="o">=</span> output,
                <span class="nv">device_os</span><span class="o">=</span> <span class="s1">&#39;nxos&#39;</span>,
                <span class="nv">index</span><span class="o">=</span> <span class="o">[</span><span class="m">0</span><span class="o">])</span>
import pprint
pprint.pprint<span class="o">(</span>result.entries<span class="o">)</span>
<span class="c1"># {&#39;Eth2/1&#39;: {&#39;Ethernet Interface&#39;: &#39;Eth2/1&#39;,</span>
<span class="c1">#             &#39;Mode&#39;: &#39;routed&#39;,</span>
<span class="c1">#             &#39;Port&#39;: &#39;--&#39;,</span>
<span class="c1">#             &#39;Reason&#39;: &#39;none&#39;,</span>
<span class="c1">#             &#39;Speed&#39;: &#39;1000(D)&#39;,</span>
<span class="c1">#             &#39;Status&#39;: &#39;up&#39;,</span>
<span class="c1">#             &#39;Type&#39;: &#39;eth&#39;,</span>
<span class="c1">#             &#39;VLAN&#39;: &#39;--&#39;},</span>
<span class="c1">#  &#39;Eth2/10&#39;: {&#39;Ethernet Interface&#39;: &#39;Eth2/10&#39;,</span>
<span class="c1">#              &#39;Mode&#39;: &#39;routed&#39;,</span>
<span class="c1">#              &#39;Port&#39;: &#39;--&#39;,</span>
<span class="c1">#              &#39;Reason&#39;: &#39;Administratively down&#39;,</span>
<span class="c1">#              &#39;Speed&#39;: &#39;auto(D)&#39;,</span>
<span class="c1">#              &#39;Status&#39;: &#39;down&#39;,</span>
<span class="c1">#              &#39;Type&#39;: &#39;eth&#39;,</span>
<span class="c1">#  ...</span>
</pre></div>
</div>
<p>More information on <a class="reference internal" href="parsers.html#book-parser"><span class="std std-ref">Parser</span></a> and <a class="reference internal" href="../cli/index.html#genie-cli"><span class="std std-ref">Genie Cli</span></a>.</p>
</div>
<div class="section" id="possible-ways-to-use-genie">
<h1>8. Possible ways to use Genie<a class="headerlink" href="#possible-ways-to-use-genie" title="Permalink to this headline">¶</a></h1>
<p>Here are a few inspiration on how Genie can be useful</p>
<p><strong>Test Automation oriented examples</strong></p>
<ul class="simple">
<li><p>Parse device output that can be used within script to verify certain state of the devices.</p></li>
<li><p>Re-use any of the available <a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/triggers">testcases</a> to test your devices/images.</p></li>
<li><p>Future-proof design which works across connection (Cli/Yang/Xml/OpenConfig/Native models/…)</p></li>
<li><p>One script which works across platforms, spend time writing good libraries and less into modifying scripts</p></li>
<li><p>Verify Cli outputs with Yang and xml outputs!</p></li>
</ul>
<p><strong>DevNet oriented examples</strong></p>
<ul class="simple">
<li><p>Connect to your devices and make sure that all devices are up, running and pingable between each other</p></li>
<li><p>Connect to your devices and retrieve information about the state of your network</p></li>
<li><p>Collect snapshot of your network and compare with the initial snapshot</p></li>
<li><p>Parse device output and stored snapshot. Every &lt;time&gt; rerun same commands are
compare state to make sure nothing has changed.</p></li>
<li><p>Take a snapshot of your network and compare the snapshot once a new image has been applied to verify the state of the network</p></li>
<li><p>Re-use any of the available <a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/triggers">testcases</a> to test your Topologies after image upgrade.</p></li>
<li><p>Perform action such as Reload Devices, Perform Switchover, ShutNoShutBgp, ConfigUnconfigOspf, etc</p></li>
<li><p>Verify your topology is stable</p></li>
<li><p>And many more! Once you have the libraries, everything can be automated!</p></li>
</ul>
<p><a class="reference external" href="mailto:asg-genie-support&#37;&#52;&#48;cisco&#46;com">Contact us</a> to discuss how Genie can help you!</p>
</div>
<div class="section" id="workshops">
<span id="book-explore-workshop"></span><h1>9. Workshops<a class="headerlink" href="#workshops" title="Permalink to this headline">¶</a></h1>
<p>Here is two workshop to get you started with Genie.</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://github.com/CiscoTestAutomation/CL-DevNet-2595">https://github.com/CiscoTestAutomation/CL-DevNet-2595</a></p></li>
<li><p><a class="reference external" href="https://github.com/RunSi/DEVWKS-2601">https://github.com/RunSi/DEVWKS-2601</a></p></li>
</ol>
<p>All the devices (They are mocked devices, python scripts which simulate
devices) and needed information are on the github.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="genie.html" class="btn btn-neutral float-right" title="1. How to install Genie" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Cisco Systems Inc.
      <span class="lastupdated">
        Last updated on Dec 22, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>