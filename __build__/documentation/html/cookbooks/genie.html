

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. How to install Genie &mdash; Genie Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/asciinema-player.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/genie_ico.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/asciinema-player.js"></script>
        <script src="../_static/tracker.js"></script>
        <script src="../_static/embed_version.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1. Summary" href="cli.html" />
    <link rel="prev" title="1. Parse devices’ outputs into structured output" href="explore.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> pyATS Library: Genie
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#explore-genie">Explore Genie</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#genie-general">Genie - General</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1. How to install Genie</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#internal-employee">Internal employee:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#devnet">DevNet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-keep-genie-up-to-date-how-to-upgrade-genie">2. How to keep Genie up to date - How to upgrade Genie?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-of-genie-libraries-and-how-to-keep-those-up-to-date">3. Summary of Genie Libraries and how to keep those up to date.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#genie-libraries-and-recording">4. Genie Libraries and Recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-your-testbed-file-and-connect-to-a-device">5. Set up your testbed file and connect to a device</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-testbed-from-an-excel-sheet">Create a Testbed from an Excel sheet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-testbed-from-a-dictionary">Create a Testbed from a Dictionary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#extra-connections">6. Extra connections!</a></li>
<li class="toctree-l3"><a class="reference internal" href="#control-devices-connections">7. Control devices’ connections!</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parse-device-output">8. Parse device output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#learn-device-feature">9. Learn device feature</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-command-line">Genie Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-libs-parsers">Genie.libs.parsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-ops">Genie.Ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-conf">Genie.Conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#genie-harness">Genie.Harness</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clean/index.html">pyATS Clean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../health/index.html">pyATS Health Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Genie Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solutions/index.html">Genie Solutions</a></li>
</ul>
<p class="caption"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">Available APIs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/models">Available Models (Conf/Ops)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">Available Parsers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">Available Triggers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/verifications">Available Verifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../abstract/index.html">Library Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metaparser/index.html">Metaparsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parsergen/index.html">CLI Auto-Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../predcore/index.html">Predicates</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS Library: Genie</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Getting Started</a> &raquo;</li>
        
      <li>1. How to install Genie</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h2>Genie Generic Recipes</h2><div class="section" id="how-to-install-genie">
<h1>1. How to install Genie<a class="headerlink" href="#how-to-install-genie" title="Permalink to this headline">¶</a></h1>
<div class="section" id="internal-employee">
<h2>Internal employee:<a class="headerlink" href="#internal-employee" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>Install pyATS - Follow the information on the <a class="reference external" href="http://wiki.cisco.com/pages/viewpage.action?pageId=80375302">pyATS wiki</a>.</p></li>
<li><p>Get libraries permission - Make sure to request <a class="reference external" href="http://wiki.cisco.com/display/PYATS/Bitbucket+Repo#BitbucketRepo-BitbucketMembership">permission</a> to bitbucket.</p></li>
<li><p>If you are using a machine in the lab, source the proxy: source /auto/pyats/bin/lab_proxy.sh (.csh)</p></li>
<li><p>Install Genie - pip install genie</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="devnet">
<h2>DevNet<a class="headerlink" href="#devnet" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>Install pyATS - Follow the information on <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/getting_started/index.html#installation">pyATS install guide</a>.</p></li>
<li><p>Install Genie - pip install genie</p></li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Visit <a class="reference internal" href="../installation/installation.html#installation"><span class="std std-ref">Genie installation</span></a> page for more information</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to visit :pyats:<a href="#id1"><span class="problematic" id="id2">`</span></a>pyAts &lt;http&gt;`website for all information about pyATS.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to create a virtual environment for any pyATS
installation.</p>
</div>
</div>
</div>
<div class="section" id="how-to-keep-genie-up-to-date-how-to-upgrade-genie">
<h1>2. How to keep Genie up to date - How to upgrade Genie?<a class="headerlink" href="#how-to-keep-genie-up-to-date-how-to-upgrade-genie" title="Permalink to this headline">¶</a></h1>
<p>One simple command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install genie --upgrade
</pre></div>
</div>
<p>This will give you the latest version of Genie</p>
</div>
<div class="section" id="summary-of-genie-libraries-and-how-to-keep-those-up-to-date">
<h1>3. Summary of Genie Libraries and how to keep those up to date.<a class="headerlink" href="#summary-of-genie-libraries-and-how-to-keep-those-up-to-date" title="Permalink to this headline">¶</a></h1>
<p>Genie is a modular package. It is divided into the following packages:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>genie                         Main Genie package
genie.libs.conf               Libraries for Configuration object
genie.libs.filetransferutils  Libraries for File Transfer utils
genie.libs.ops                Genie core for Operation state object
genie.libs.parser             Libraries containing all the parsers
genie.libs.robot              Libraries containing all Robot keywords
genie.libs.sdk                Libraries containing all Triggers and Verifications
genie.telemetry               Genie Core for telemetry - Monitor testbed
</pre></div>
</div>
<p>Each is separate pip packages which can be updated at any time with the
following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install &lt;package name&gt; --upgrade
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install genie.libs.robot --upgrade
pip install genie.telemetry --upgrade
</pre></div>
</div>
</div>
<div class="section" id="genie-libraries-and-recording">
<h1>4. Genie Libraries and Recording<a class="headerlink" href="#genie-libraries-and-recording" title="Permalink to this headline">¶</a></h1>
<p>Below Genie packages are Open source libraries.
Ready for your contribution!</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-text">Libraries git location</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Library</p></th>
<th class="head"><p>Git repository</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.conf</span></code></p></td>
<td><p><a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse">Genie.libs Repository</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.ops</span></code></p></td>
<td><p><a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse">Genie.libs Repository</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.sdk</span></code></p></td>
<td><p><a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse">Genie.libs Repository</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.robot</span></code></p></td>
<td><p><a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse">Genie.libs Repository</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.parser</span></code></p></td>
<td><p><a class="reference external" href="http://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genieparser/browse">Genie.libs.parser Repository</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">genie.telemetry</span></code></p></td>
<td><p><a class="reference external" href="http://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genietelemetry/browse">Genie.telemetry Repository</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.filetransferutils</span></code></p></td>
<td><p><a class="reference external" href="http://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/geniefiletransferutilslib/browse">Genie.libs.filetransferutils Repository</a></p></td>
</tr>
</tbody>
</table>
<p><strong>Recording</strong></p>
<p>Watch these recordings on how to install them and start contributing!</p>
<table class="docutils align-default" id="id8">
<caption><span class="caption-text">Recordings</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Subject</p></th>
<th class="head"><p>Link</p></th>
<th class="head"><p>password</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Contribute to Genie - Getting started</p></td>
<td><p><a class="reference external" href="https://cisco.webex.com/recordingservice/sites/cisco/recording/playback/379c20aa1b864aef9a4b07a93db93b40">Link</a></p></td>
<td><p>GenieTraining1</p></td>
</tr>
<tr class="row-odd"><td><p>Modify existing Trigger</p></td>
<td><p><a class="reference external" href="https://cisco.webex.com/recordingservice/sites/cisco/recording/playback/bd08573eabd445648d2365aaa20c1c22">Link</a></p></td>
<td><p>GenieTraining1</p></td>
</tr>
<tr class="row-even"><td><p>Create a new Trigger</p></td>
<td><p><a class="reference external" href="https://cisco.webex.com/recordingservice/sites/cisco/recording/playback/836c1d32f2634427abb62c7efa148780">Link</a></p></td>
<td><p>GenieTraining1</p></td>
</tr>
<tr class="row-odd"><td><p>Genie.abstraction introduction</p></td>
<td><p><a class="reference external" href="https://cisco.webex.com/cisco/ldr.php?RCID=7c81df3e847ac07e1485d5cc9742ebcd">Link</a></p></td>
<td><p>GenieTraining1</p></td>
</tr>
<tr class="row-even"><td><p>Create a new trigger under new abstraction package</p></td>
<td><p><a class="reference external" href="https://cisco.webex.com/cisco/ldr.php?RCID=e8208d31e7744c0960e3cb3618acdc9d">Link</a></p></td>
<td><p>GenieTraining1</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="set-up-your-testbed-file-and-connect-to-a-device">
<span id="book-setup-testbed"></span><h1>5. Set up your testbed file and connect to a device<a class="headerlink" href="#set-up-your-testbed-file-and-connect-to-a-device" title="Permalink to this headline">¶</a></h1>
<p>Create your own Testbed file related to your device by following the <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/getting_started/index.html#describe-your-testbed">pyATS guide.</a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
  <span class="nt">nx-osv-1</span><span class="p">:</span>
      <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;uut&#39;</span>
      <span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Nexus&#39;</span>
      <span class="nt">os</span><span class="p">:</span> <span class="s">&#39;nxos&#39;</span>
      <span class="nt">tacacs</span><span class="p">:</span>
          <span class="nt">login_prompt</span><span class="p">:</span> <span class="s">&quot;login:&quot;</span>
          <span class="nt">password_prompt</span><span class="p">:</span> <span class="s">&quot;Password:&quot;</span>
          <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;admin&quot;</span>
      <span class="nt">passwords</span><span class="p">:</span>
          <span class="nt">tacacs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Cisc0123</span>
          <span class="nt">enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
          <span class="nt">line</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">connections</span><span class="p">:</span>
          <span class="nt">defaults</span><span class="p">:</span>
            <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;unicon.Unicon&#39;</span>
          <span class="nt">cli</span><span class="p">:</span>
              <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">telnet</span>
              <span class="nt">ip</span><span class="p">:</span> <span class="s">&quot;172.25.192.90&quot;</span>
              <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17052</span>
</pre></div>
</div>
<p>Here are a few important details to keep in mind:</p>
<p>1) The device name must match the hostname of the device, otherwise, the
connection will hang.</p>
<ol class="arabic simple" start="2">
<li><p>At least one device need to have the alias ‘uut’ in the testbed yaml file.</p></li>
</ol>
<p>Your testbed is now ready to be used within <code class="xref py py-obj docutils literal notranslate"><span class="pre">Genie</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">genie</span> <span class="kn">import</span> <span class="n">testbed</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;testbed.yaml&#39;</span><span class="p">)</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;nx-osv-1&#39;</span><span class="p">]</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<script src="https://asciinema.org/a/NJQ0lqOqD5SFAh4tG7EqtWq9n.js" id="asciicast-NJQ0lqOqD5SFAh4tG7EqtWq9n" async></script><div class="admonition note">
<p class="admonition-title">Note</p>
<p>More information on the <a class="reference internal" href="../userguide/Conf/user/topology.html#topology-testbed"><span class="std std-ref">testbed</span></a> page.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Genie follows the same concept as pyATS. For more information
visit <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/connections/manager.html#method-connect">pyATS website</a>.</p>
</div>
<div class="section" id="create-a-testbed-from-an-excel-sheet">
<span id="book-genie-excel-tb"></span><h2>Create a Testbed from an Excel sheet<a class="headerlink" href="#create-a-testbed-from-an-excel-sheet" title="Permalink to this headline">¶</a></h2>
<p>You can also create a testbed yaml from an excel sheet with <code class="xref py py-obj docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">create</span> <span class="pre">testbed</span></code> command, here’s an example:</p>
<p>Here is an excel sheet containing device data:</p>
<blockquote>
<div><div class="figure align-default">
<img alt="Sample Excel file" src="../_images/Excel_book.png" />
</div>
</div></blockquote>
<p>we can turn it into a testbed yaml file by running the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>genie<span class="o">]</span> demo:373&gt; pyats create testbed file --path my_devices.xls --output yaml/my_testbed.yaml
... Testbed file generated: yaml/my_testbed.yaml
</pre></div>
</div>
<p>This will give us the below yaml:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
  <span class="nt">R1</span><span class="p">:</span>
        <span class="nt">connections</span><span class="p">:</span>
          <span class="nt">cli</span><span class="p">:</span>
                <span class="nt">ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">172.25.192.101</span>
                <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17013</span>
                <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ssh</span>
        <span class="nt">credentials</span><span class="p">:</span>
          <span class="nt">default</span><span class="p">:</span>
                <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco</span>
                <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
  <span class=" -Error">    </span><span class="nt">enable</span><span class="p">:</span>
                <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco</span>
      <span class=" -Error">  </span><span class="nt">os</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">iosxe</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">iosxe</span>
  <span class="nt">R2</span><span class="p">:</span>
        <span class="nt">connections</span><span class="p">:</span>
          <span class="nt">cli</span><span class="p">:</span>
                <span class="nt">ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">172.25.192.102</span>
                <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17015</span>
                <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ssh</span>
        <span class="nt">credentials</span><span class="p">:</span>
          <span class="nt">default</span><span class="p">:</span>
                <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco</span>
                <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
          <span class="nt">enable</span><span class="p">:</span>
                <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco</span>
        <span class="nt">os</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">iosxr</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">iosxr</span>
  <span class="nt">R3</span><span class="p">:</span>
        <span class="nt">connections</span><span class="p">:</span>
          <span class="nt">cli</span><span class="p">:</span>
                <span class="nt">ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">172.25.192.103</span>
                <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17019</span>
                <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ssh</span>
        <span class="nt">credentials</span><span class="p">:</span>
          <span class="nt">default</span><span class="p">:</span>
                <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco</span>
                <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
  <span class=" -Error">    </span><span class="nt">enable</span><span class="p">:</span>
                <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco</span>
      <span class=" -Error">  </span><span class="nt">os</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nxos</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nxos</span>
</pre></div>
</div>
<p>For more info on creating a testbed from Excel, please read <a class="reference internal" href="../cli/genie_create.html#cli-create"><span class="std std-ref">Create Testbed</span></a>.</p>
</div>
<div class="section" id="create-a-testbed-from-a-dictionary">
<span id="book-genie-dict-tb"></span><h2>Create a Testbed from a Dictionary<a class="headerlink" href="#create-a-testbed-from-a-dictionary" title="Permalink to this headline">¶</a></h2>
<p>Genie testbed also support creating a testbed directly from a dictionary without a yaml file. This feature is
convenient for quick testing without complicated configurations, and it allows seamless transition from json if
the device data obtained from a remote server.</p>
<p>The below code shows the minimum data required for a successful creation, please consult <a class="reference internal" href="../cli/genie_create.html#cli-create-testbed"><span class="std std-ref">pyats create testbed</span></a>
for the minimum key requirement.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">port</span></code> here is an optional key and it is separate from the ip address.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">genie.testbed</span> <span class="kn">import</span> <span class="n">load</span>
<span class="n">o</span> <span class="o">=</span>  <span class="p">{</span><span class="s2">&quot;devices&quot;</span><span class="p">:{</span>
                <span class="s2">&quot;R1_xe&quot;</span><span class="p">:{</span>
                        <span class="s2">&quot;ip&quot;</span><span class="p">:</span><span class="s2">&quot;172.25.192.104&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">17005</span><span class="p">,</span>
                        <span class="s2">&quot;protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;telnet&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;os&quot;</span><span class="p">:</span> <span class="s2">&quot;iosxe&quot;</span><span class="p">,</span>
        <span class="p">}</span>
 <span class="p">}}</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">device</span><span class="o">=</span><span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;R1_xe&#39;</span><span class="p">]</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="extra-connections">
<span id="book-genie-extra-connection"></span><h1>6. Extra connections!<a class="headerlink" href="#extra-connections" title="Permalink to this headline">¶</a></h1>
<p>There are multiple ways to connect to a device. Using Telnet, ssh, Rest, Yang,
etc.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
  <span class="nt">nx-osv-1</span><span class="p">:</span>
      <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;uut&#39;</span>
      <span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Nexus&#39;</span>
      <span class="nt">os</span><span class="p">:</span> <span class="s">&#39;nxos&#39;</span>
      <span class="nt">tacacs</span><span class="p">:</span>
          <span class="nt">login_prompt</span><span class="p">:</span> <span class="s">&quot;login:&quot;</span>
          <span class="nt">password_prompt</span><span class="p">:</span> <span class="s">&quot;Password:&quot;</span>
          <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;admin&quot;</span>
      <span class="nt">passwords</span><span class="p">:</span>
          <span class="nt">tacacs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Cisc0123</span>
          <span class="nt">enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
          <span class="nt">line</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">connections</span><span class="p">:</span>
          <span class="nt">defaults</span><span class="p">:</span>
            <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;unicon.Unicon&#39;</span>
          <span class="nt">a</span><span class="p">:</span>
              <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">telnet</span>
              <span class="nt">ip</span><span class="p">:</span> <span class="s">&quot;172.25.192.90&quot;</span>
              <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17052</span>
          <span class="nt">vty</span><span class="p">:</span>
              <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">telnet</span>
              <span class="nt">ip</span><span class="p">:</span> <span class="s">&quot;10.1.3.2&quot;</span>
</pre></div>
</div>
<p>To connect with these connections:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default to &#39;a&#39;</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">device</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;show version&#39;</span><span class="p">)</span>

<span class="c1"># Use Telnet</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">via</span><span class="o">=</span><span class="n">vty</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;vty&#39;</span><span class="p">)</span>
<span class="n">device</span><span class="o">.</span><span class="n">vty</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;show version&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For Genie, it needs to know which connection to use for each device.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="s1">&#39;cli&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;vty&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the supported keys are: cli, xml, rest and yang.</p>
</div>
</div>
<div class="section" id="control-devices-connections">
<span id="book-genie-connection-control"></span><h1>7. Control devices’ connections!<a class="headerlink" href="#control-devices-connections" title="Permalink to this headline">¶</a></h1>
<p>If no mapping datafile provided or <code class="xref py py-obj docutils literal notranslate"><span class="pre">devices</span></code> passed in the job
file/command line argument, Genie by default will connect to all the devices in
the testbed yaml file.</p>
<p>If user wants to control the connection method per device, this can be controlled by;</p>
<blockquote>
<div><ol class="upperalpha">
<li><p>Using the mapping datafile explained <a class="reference internal" href="../userguide/harness/user/datafile.html#mapping-datafile"><span class="std std-ref">here</span></a></p></li>
<li><p>Passing argument <code class="xref py py-obj docutils literal notranslate"><span class="pre">devices</span></code> in the job file/command line argument,
check here for <a class="reference internal" href="../userguide/harness/user/reference.html#harness-arguments"><span class="std std-ref">details</span></a></p>
<p>In that case, each device passed in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">devices</span></code> list argument need to either;</p>
<p>1 - Have a single connection defined in the testbed yaml file</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
  <span class="nt">nx-osv-1</span><span class="p">:</span>
      <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;uut&#39;</span>
      <span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Nexus&#39;</span>
      <span class="nt">os</span><span class="p">:</span> <span class="s">&#39;nxos&#39;</span>
      <span class="nt">tacacs</span><span class="p">:</span>
          <span class="nt">login_prompt</span><span class="p">:</span> <span class="s">&quot;login:&quot;</span>
          <span class="nt">password_prompt</span><span class="p">:</span> <span class="s">&quot;Password:&quot;</span>
          <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;admin&quot;</span>
      <span class="nt">passwords</span><span class="p">:</span>
          <span class="nt">tacacs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Cisc0123</span>
          <span class="nt">enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
          <span class="nt">line</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">connections</span><span class="p">:</span>
          <span class="nt">defaults</span><span class="p">:</span>
            <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;unicon.Unicon&#39;</span>
          <span class="nt">vty</span><span class="p">:</span>
              <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">telnet</span>
              <span class="nt">ip</span><span class="p">:</span> <span class="s">&quot;100.100.100.100&quot;</span>
              <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17052</span>
</pre></div>
</div>
</div></blockquote>
<p>2 - Have multiple connections defined in the testbed yaml file but at least one of them named <code class="xref py py-obj docutils literal notranslate"><span class="pre">cli</span></code></p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
  <span class="nt">nx-osv-1</span><span class="p">:</span>
      <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;uut&#39;</span>
      <span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Nexus&#39;</span>
      <span class="nt">os</span><span class="p">:</span> <span class="s">&#39;nxos&#39;</span>
      <span class="nt">tacacs</span><span class="p">:</span>
          <span class="nt">login_prompt</span><span class="p">:</span> <span class="s">&quot;login:&quot;</span>
          <span class="nt">password_prompt</span><span class="p">:</span> <span class="s">&quot;Password:&quot;</span>
          <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;admin&quot;</span>
      <span class="nt">passwords</span><span class="p">:</span>
          <span class="nt">tacacs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Cisc0123</span>
          <span class="nt">enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
          <span class="nt">line</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">connections</span><span class="p">:</span>
          <span class="nt">defaults</span><span class="p">:</span>
            <span class="nt">class</span><span class="p">:</span> <span class="s">&#39;unicon.Unicon&#39;</span>
          <span class="nt">vty</span><span class="p">:</span>
              <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">telnet</span>
              <span class="nt">ip</span><span class="p">:</span> <span class="s">&quot;100.100.100.100&quot;</span>
              <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17052</span>
          <span class="nt">cli</span><span class="p">:</span>      <span class="l l-Scalar l-Scalar-Plain">------ &gt; Here it is required to be named `cli`</span>
              <span class="l l-Scalar l-Scalar-Plain">protocol</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">telnet</span>
              <span class="l l-Scalar l-Scalar-Plain">ip</span><span class="p p-Indicator">:</span> <span class="s">&quot;172.25.192.90&quot;</span>
              <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">17052</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="parse-device-output">
<h1>8. Parse device output<a class="headerlink" href="#parse-device-output" title="Permalink to this headline">¶</a></h1>
<p>Parsing a device output is as easy as just asking for it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default to &#39;a&#39;</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show version&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

<span class="p">{</span><span class="s1">&#39;platform&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hardware&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bootflash&#39;</span><span class="p">:</span> <span class="s1">&#39;3184776 kB&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;chassis&#39;</span><span class="p">:</span> <span class="s1">&#39;NX-OSv Supervisor Module&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;device_name&#39;</span><span class="p">:</span> <span class="s1">&#39;nx-osv-1&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;NX-OSv&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;processor_board_id&#39;</span><span class="p">:</span> <span class="s1">&#39;TM00010000B&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;slots&#39;</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">},</span>
<span class="o">...</span>
</pre></div>
</div>
<p><a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/parsers">List of all available parsers</a>.</p>
</div>
<div class="section" id="learn-device-feature">
<h1>9. Learn device feature<a class="headerlink" href="#learn-device-feature" title="Permalink to this headline">¶</a></h1>
<p>Learning a whole device feature is also very easy.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default to &#39;a&#39;</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="s1">&#39;ospf&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

<span class="p">{</span>
<span class="s1">&#39;feature_ospf&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;address_family&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;ipv4&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;instance&#39;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;nsr&#39;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s1">&#39;enable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
              <span class="p">},</span>
            <span class="s1">&#39;enable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;auto_cost&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="o">...</span>
</pre></div>
</div>
<p><a class="reference external" href="http://wwwin-pyats.cisco.com/cisco-shared/genie/latest/genie_libs/#/models">List of all available feature</a>.</p>
<p><a class="reference internal" href="ops.html#book-ops-summary"><span class="std std-ref">More information on Ops</span></a>.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.html" class="btn btn-neutral float-right" title="1. Summary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="explore.html" class="btn btn-neutral float-left" title="1. Parse devices’ outputs into structured output" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Cisco Systems Inc.
      <span class="lastupdated">
        Last updated on Dec 22, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>