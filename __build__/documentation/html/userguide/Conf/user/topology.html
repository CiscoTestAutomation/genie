

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Topology &mdash; Genie Documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/asciinema-player.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/genie_ico.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/asciinema-player.js"></script>
        <script src="../../../_static/tracker.js"></script>
        <script src="../../../_static/embed_version.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Feature" href="feature.html" />
    <link rel="prev" title="Conf User Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> pyATS Library: Genie
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cookbooks/index.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Conf Guide</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Conf User Guide</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="feature.html">Feature</a></li>
<li class="toctree-l4"><a class="reference internal" href="connections.html">Connections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/index.html">Conf Developer Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Ops/index.html">Ops Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../harness/index.html">Harness Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../robot/index.html">RobotFramework Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../genietelemetry/integration.html">GenieTelemetry Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../apis/index.html">API Guidelines and good practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../utils/index.html">Useful Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../clean/index.html">pyATS Clean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../health/index.html">pyATS Health Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli/index.html">Genie Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../solutions/index.html">Genie Solutions</a></li>
</ul>
<p class="caption"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">Available APIs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/models">Available Models (Conf/Ops)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">Available Parsers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">Available Triggers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/verifications">Available Verifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../abstract/index.html">Library Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../metaparser/index.html">Metaparsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parsergen/index.html">CLI Auto-Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../predcore/index.html">Predicates</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../roadmap/index.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/index.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pyATS Library: Genie</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">User Guide</a> &raquo;</li>
        
          <li><a href="../index.html">Conf Guide</a> &raquo;</li>
        
          <li><a href="index.html">Conf User Guide</a> &raquo;</li>
        
      <li>Topology</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="topology">
<span id="topology-testbed"></span><h1>Topology<a class="headerlink" href="#topology" title="Permalink to this headline">¶</a></h1>
<p>In this section, users will learn how to create and use the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> topology.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Genie topology is based on the <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/html/topology/index.html">pyats topology</a>. There are two ways to
create the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> topology:</p>
<blockquote>
<div><ol class="arabic">
<li><dl>
<dt>Automatically<span class="classifier">By converting the <code class="docutils literal notranslate"><span class="pre">pyATS</span></code> Testbed object into the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> Testbed</span></dt><dd><p>object. This is the most common way to create the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> topology.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Manually: By creating each topology object and then interconnecting them</dt><dd><p>using their corresponding APIs.  Whenever users manually create the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> topology,
the APIs can enable topology modifications in runtime (ex: adding loopback interface).</p>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="automatic-creation">
<h2>Automatic Creation<a class="headerlink" href="#automatic-creation" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">pyATS</span></code> testbed topology is based on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">testbed</span></code> yaml file, converted
to <code class="docutils literal notranslate"><span class="pre">Genie</span></code> testbed. All  devices, interfaces, and links defined in the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">testbed</span></code> yaml file are created as part of the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> testbed object.</p>
<p>In the example below, users will see that the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Genie.testbed</span></code> variable stores the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Testbed</span></code> object as a class variable. This enables users to use the
object in functions without having to pass it as parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import Genie Entry point</span>
<span class="kn">from</span> <span class="nn">genie.conf</span> <span class="kn">import</span> <span class="n">Genie</span>

<span class="c1"># Using pyATS Testbed object, instantiate a Genie testbed object</span>
<span class="n">genie_testbed</span> <span class="o">=</span> <span class="n">Genie</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">pyats_testbed</span><span class="p">)</span>

<span class="c1"># From this point</span>
<span class="k">assert</span> <span class="n">Genie</span><span class="o">.</span><span class="n">testbed</span>  <span class="o">==</span> <span class="n">genie_testbed</span>
</pre></div>
</div>
</div>
<div class="section" id="manual-creation">
<h2>Manual Creation<a class="headerlink" href="#manual-creation" title="Permalink to this headline">¶</a></h2>
<p>Instances where user manually create the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> topology, the script can
create the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Genie</span></code> Testbed object, <code class="xref py py-obj docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">link</span></code>, and its <code class="xref py py-obj docutils literal notranslate"><span class="pre">interfaces</span></code> during runtime.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># import modules</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">Link</span>
<span class="kn">from</span> <span class="nn">pyats.datastructures.logic</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Not</span><span class="p">,</span> <span class="n">Or</span>

<span class="c1"># Create a Testbed</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myTestbed&#39;</span><span class="p">)</span>

<span class="c1"># Create two devices</span>
<span class="c1"># Adding testbed=testbed automatically bind the devices to the testbed.</span>
<span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">dev2</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>

<span class="c1"># Let&#39;s add an interface for each device</span>
<span class="c1"># Adding device=&lt;dev object&gt; automatically bind the interface to a device</span>
<span class="n">intf_dev1</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">)</span>
<span class="n">intf_dev2</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">)</span>

<span class="c1"># Now some link to connect those 2 interfaces</span>
<span class="c1"># A link must be part of a testbed</span>
<span class="n">link1</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;dev1-dev2-1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">)</span>
<span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf_dev1</span><span class="p">)</span>
<span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf_dev2</span><span class="p">)</span>

<span class="c1"># We now have a testbed, which contains two devices.</span>
<span class="c1"># Those two devices each contains an interface, that are interconnected</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span>
<span class="n">TopologyDict</span><span class="p">({</span><span class="s1">&#39;PE1&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ef9cec</span><span class="o">&gt;</span><span class="p">,</span>
              <span class="s1">&#39;P1&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e9e22c</span><span class="o">&gt;</span><span class="p">})</span>

<span class="c1"># Each device has 1 interface</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;P1&#39;</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e9e22c</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;P1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">interfaces</span>
<span class="n">TopologyDict</span><span class="p">({</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e5e1ec</span><span class="o">&gt;</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;PE1&#39;</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ef9cec</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;PE1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">interfaces</span>
<span class="n">TopologyDict</span><span class="p">({</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ea388c</span><span class="o">&gt;</span><span class="p">})</span>

<span class="c1"># Testbed has a link</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">links</span>
<span class="p">{</span><span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;dev1-dev2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e5e94c</span><span class="o">&gt;</span><span class="p">}</span>

<span class="c1"># Which connect two interfaces together</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">testbed</span><span class="o">.</span><span class="n">links</span><span class="p">:</span> <span class="n">link</span><span class="o">.</span><span class="n">interfaces</span>
<span class="n">WeakList</span><span class="p">([</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ea388c</span><span class="o">&gt;</span><span class="p">,</span>
          <span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e5e1ec</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="testbed-object">
<span id="testbed"></span><h2>Testbed Object<a class="headerlink" href="#testbed-object" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Testbed</span></code> object is the entry point of the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> Topology. The ‘Testbed` has
access to all of the objects of the topology. By using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_</span></code> method,
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Testbed</span></code> can also filter through all of the objects based
on the user’s requirements.</p>
<p>For more information on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_</span></code> APIs, users may consult the <a class="reference internal" href="#find"><span class="std std-ref">find mechanism</span></a>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
| Testbed object                                                           |
+==========================================================================+
| Attributes            | Description                                      |
|-----------------------+--------------------------------------------------|
| name                  | Testbed name, should be unique                   |
| devices               | Dict of testbed devices                          |
| interfaces            | Tuple of all interfaces in this testbed          |
| links                 | Set of testbed links                             |
| features              | List of all the features in this testbed         |
| ipv4_cache            | Available ipv4 address                           |
| ipv6_cache            | Available ipv6 address                           |
| mac_cache             | Available mac address                            |
+==========================================================================+
| Methods               | Description                                      |
|-----------------------+--------------------------------------------------|
| add_device            | Adds a device (Device object) to this testbed.   |
| remove_device         | Removes a device (Device object) from this       |
|                       | testbed.                                         |
| find_devices          | Returns device objects of this testbed with      |
|                       | specific requirements.                           |
| find_links            | Return links objects of this testbed with        |
|                       | specific requirements.                           |
| find_interface        | Returns interface objects of this testbed with   |
|                       | requirements. It appends all the interfaces into |
|                       | the same list.                                   |
| find_features         | Returns features objects of this testbed with    |
|                       | specific requirements. It appends all the        |
|                       | features into the same list.                     |
| build_config          | Builds and configures the whole testbed. Loops   |
|                       | through each device, features, and link to       |
|                       | configure it.                                    |
| build_unconfig        | Builds and unconfigures the whole testbed.       |
|                       | Loops through each device, features and list to  |
|                       | configure it.                                    |
| object_instances      | Returns a frozenset of all the instances of a    |
|                       | particular type.                                                               |
| set_active_objects    | Froms a list of interfaces, set attributes       |
|                       | `obj_state` of all devices, interfaces and       |
|                       | and link as `active` and `inactive`.             |
| squeeze               | Removes all unwanted devices, interfaces         |
|                       | and links from this testbed.                     |
+==========================================================================+
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># import modules</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">Link</span>
<span class="kn">from</span> <span class="nn">pyats.datastructures.logic</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Not</span><span class="p">,</span> <span class="n">Or</span>

<span class="c1"># Create a Testbed</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myTestbed&#39;</span><span class="p">)</span>

<span class="c1"># Create two devices</span>
<span class="c1"># Adding testbed=testbed automatically bind the devices to the testbed.</span>
<span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;iosxe&#39;</span><span class="p">)</span>
<span class="n">dev2</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;helper&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;iosxe&#39;</span><span class="p">)</span>

<span class="c1"># Let&#39;s add an interface for each device</span>
<span class="c1"># Adding device=&lt;dev object&gt; automatically bind the interface to a device</span>
<span class="n">intf_dev1</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PE1&#39;</span><span class="p">])</span>
<span class="n">intf_dev2</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;P1&#39;</span><span class="p">])</span>

<span class="c1"># Now some link to connect those 2 interfaces</span>
<span class="c1"># A link must be part of a testbed</span>
<span class="n">link1</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;dev1-dev2-1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;used link&#39;</span><span class="p">])</span>
<span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf_dev1</span><span class="p">)</span>
<span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf_dev2</span><span class="p">)</span>

<span class="c1"># Un used link - No interface connected to this link</span>
<span class="n">link2</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;dev1-dev2-1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;unused link&#39;</span><span class="p">])</span>

<span class="c1"># For more information on find Apis, please visit the</span>
<span class="c1"># Find Mechanism section, but here are some examples.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf720de2c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf720dacc</span><span class="o">&gt;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf720de2c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Now set all the interfaces on dev1 to be active, and the rest will</span>
<span class="c1"># become inactive.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">set_active_interfaces</span><span class="p">(</span><span class="n">dev1</span><span class="o">.</span><span class="n">interfaces</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">(</span><span class="n">obj_state</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df160c</span><span class="o">&gt;</span><span class="p">]</span>
<span class="c1"># It also applies on devices</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">obj_state</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f62b6c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># And we can see the inactive devices</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">obj_state</span><span class="o">=</span><span class="s1">&#39;inactive&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f072ac</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Find are useful to find a particular type of object and filter</span>
<span class="c1"># based on requirements.</span>
<span class="c1">#</span>
<span class="c1"># API object_instances look through all the objects that have been</span>
<span class="c1"># created and verified the type of them. If it matches,</span>
<span class="c1"># it will be returned as a frozenset. By default, it will match all objects</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">object_instances</span><span class="p">()</span>
<span class="nb">frozenset</span><span class="p">({</span><span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;dev1-dev2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df8d2c</span><span class="o">&gt;</span><span class="p">,</span>
           <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;dev1-dev2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6dfd7ac</span><span class="o">&gt;</span><span class="p">,</span>
           <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f0e18c</span><span class="o">&gt;</span><span class="p">,</span>
           <span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df85cc</span><span class="o">&gt;</span><span class="p">,</span>
           <span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6dfd60c</span><span class="o">&gt;</span><span class="p">,</span>
           <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f69bac</span><span class="o">&gt;</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">object_instances</span><span class="p">(</span><span class="bp">cls</span><span class="o">=</span><span class="n">Interface</span><span class="p">)</span>
<span class="nb">frozenset</span><span class="p">({</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df85cc</span><span class="o">&gt;</span><span class="p">,</span>
           <span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6dfd60c</span><span class="o">&gt;</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">object_instances</span><span class="p">(</span><span class="bp">cls</span><span class="o">=</span><span class="n">Device</span><span class="p">)</span>
<span class="nb">frozenset</span><span class="p">({</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f0e18c</span><span class="o">&gt;</span><span class="p">,</span>
           <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f69bac</span><span class="o">&gt;</span><span class="p">})</span>

<span class="c1"># Let&#39;s find all of the interface which have status inactive</span>
<span class="n">testbed</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">(</span><span class="n">obj_state</span><span class="o">=</span><span class="s1">&#39;inactive&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df664c</span><span class="o">&gt;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">obj_state</span><span class="o">=</span><span class="s1">&#39;inactive&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f072ac</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Remove dev1 of the testbed</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">remove_device</span><span class="p">(</span><span class="n">dev1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f0e18c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Add it back</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">add_device</span><span class="p">(</span><span class="n">dev1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f0e18c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f69bac</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<blockquote>
<div><p>Testbed object inherits from <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/topology/index.html">pyats testbed</a> hence having all its features and functionalities.</p>
</div></blockquote>
<p># Use the squeeze functionality
# extend_devices_from_links=True
&gt;&gt;&gt; testbed.squeeze(‘d1’, ‘l23’, extend_devices_from_links=True)
&gt;&gt;&gt; [dev for dev in testbed.devices]
[‘d3’, ‘d2’, ‘d1’]
&gt;&gt;&gt; [link.name for link in testbed.links]
[‘l23’]
# extend_devices_from_links=False
&gt;&gt;&gt; testbed.squeeze(‘d1’, ‘l23’, extend_devices_from_links=False)
&gt;&gt;&gt; [dev for dev in testbed.devices]
[‘d1’]
&gt;&gt;&gt; [link.name for link in testbed.links]
[]</p>
</div>
</div>
<div class="section" id="device-object">
<span id="device"></span><h2>Device Object<a class="headerlink" href="#device-object" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Device</span></code> object represents a physical or a virtual router, switch, traffic
generator, and so on.</p>
<p>For more information on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_</span></code> APIs, users may consult the
<a class="reference internal" href="#find"><span class="std std-ref">find mechanism</span></a>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
| Device object                                                            |
+==========================================================================+
| Attributes       | Description                                           |
|------------------+-------------------------------------------------------|
| name             | Device name, should be unique                         |
| aliases          | List of aliases for the device. Useful for            |
|                  | recognizing specific devices                          |
| roles            | List of devices&#39; roles                                |
| type             | Device type                                           |
| interfaces       | Dict of interfaces                                    |
| features         | List of features to configure on the device           |
| obj_state        | State of the object device. Must be set manually.     |
| testbed          | Parent testbed object. Internally it is a weakref     |
| os               | Keeps track of the OS of the device                   |
| mapping          | Keeps track of which connection to use for            |
|                  | different abstraction tokens.                         |
+==========================================================================+
| Methods          | Description                                           |
|------------------+-------------------------------------------------------|
| add_interface    | Adds an interface (Interface object) to this device   |
| remove_interface | Removes an interface (Interface object) from this     |
|                  | device                                                |
| parse            | Parses a command into structured format using Genie   |
|                  | parsers
| add_feature      | Adds a feature (Feature object) to this device        |
| remove_feature   | Removes a feature (Feature object) from this device   |
| find_interfaces  | Returns interfaces (Interface object) of this device  |
|                  | with specific requirements                            |
| find_features    | Returns features objects of this testbed with         |
|                  | specific requirements.                                |
| build_config     | Builds and configures the whole testbed. Loops through|
|                  | each device, features, and link to configure it.      |
| build_unconfig   | Builds and unconfigures the whole testbed. Loops      |
|                  |through each device, features and link to configure it.|
+==========================================================================+
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># import modules</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">Link</span>

<span class="c1"># Create a Testbed</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myTestbed&#39;</span><span class="p">)</span>

<span class="c1"># Create two devices</span>
<span class="c1"># Adding testbed=testbed automatically bind the devices to the testbed.</span>
<span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">dev2</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;helper&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>

<span class="c1"># Let&#39;s add a few interfaces to each device</span>
<span class="c1"># Adding device=&lt;dev object&gt; automatically bind the interface to a device</span>
<span class="n">intf1_dev1</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PE1_1&#39;</span><span class="p">])</span>
<span class="n">intf2_dev1</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/8&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PE1_2&#39;</span><span class="p">])</span>
<span class="n">intf1_dev2</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;P1&#39;</span><span class="p">])</span>
<span class="n">intf2_dev2</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/8&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;P1&#39;</span><span class="p">])</span>

<span class="c1"># Using find_interfaces</span>
<span class="c1"># No requirements, so all are returned</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev1</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e7522c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/8&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e1b98c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># All the find commands previously shown can also be done for this object</span>

<span class="c1"># Remove an interface</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev1</span><span class="o">.</span><span class="n">remove_interface</span><span class="p">(</span><span class="n">intf1_dev1</span><span class="p">)</span>

<span class="c1"># Make sure it is gone</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev1</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/8&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e1b98c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Let&#39;s add it back</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev1</span><span class="o">.</span><span class="n">add_interface</span><span class="p">(</span><span class="n">intf1_dev1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev1</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e7522c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/8&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e1b98c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># let&#39;s do a parse</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show interfaces&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Device object inherits from <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/topology/concept.html#device-objects">pyats device</a> hence having all its features and functionalities.</p>
</div>
</div>
<div class="section" id="interface-object">
<span id="interface"></span><h2>Interface Object<a class="headerlink" href="#interface-object" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> object represents a physical or virtual device interface.
An <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> can have many subclasses, one for each particular type of
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code>. This is necessary, as each <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> may have a different
configuration and as such, different attributes may be necessary.</p>
<p>The infrastructure base classes include <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code>, which is the base class
for all current and future <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> implementations.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> plays two roles in <code class="docutils literal notranslate"><span class="pre">Genie</span></code>. The first role is as an object part of
the topology. This is what this section describes. Secondly, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> plays
the role of configurable object base class. All interface configurable objects are
inherited from this class. These configurable objects are stored into
<code class="xref py py-obj docutils literal notranslate"><span class="pre">genie_libs</span></code> git repository inside the <code class="xref py py-obj docutils literal notranslate"><span class="pre">interface</span></code> directory. With the help of
<code class="xref py py-obj docutils literal notranslate"><span class="pre">__new__</span></code> method inside the base class, users can locate the right interface.</p>
<p>The infrastructure provides <code class="xref py py-obj docutils literal notranslate"><span class="pre">PhysicalInterface</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">VirtualInterface</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">PseudoInterface</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">LoopbackInterface</span></code>, which users may use to as a baseclass to construct
their own configurable interface in <code class="xref py py-obj docutils literal notranslate"><span class="pre">genie_libs</span></code>.</p>
<p>Refer to the <a class="reference internal" href="#find"><span class="std std-ref">find mechanism</span></a> documentation for more
information on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_</span></code> APIs..</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
| Interface object                                                         |
+==========================================================================+
| Attributes               | Description                                   |
|--------------------------+-----------------------------------------------|
| name                     | Interface name, should be unique              |
| aliases                  | List of aliases for the interface. Useful for |
|                          | recognizing interfaces                        |
| links                    | List of link that this interface is part      |
| obj_state                | State of the object interface. Must be        |
|                          | set manually.                                 |
| device                   | Weakref to device object containing the       |
|                          | interface                                     |
| features                 | List of features to configure on the device   |
+==========================================================================+
| Methods                  | Description                                   |
|--------------------------+-----------------------------------------------|
| _on_added_from_device    | Action to be taken when adding an interface   |
|                          | to a device.                                  |
| _on_removed_from_device  | Action to be taken when removing an interface |
|                          | from a device.                                |
| _on_added_from_link      | Action to be taken when adding an interface   |
|                          | to a link.                                    |
| _on_removed_from_link    | Action to be taken when removing an interface |
|                          | from a link.                                  |
| find_links               | Returns links objects of this testbed         |
|                          | with specific requirements.                   |
| find_features            | Returns features objects of this testbed with |
|                          | specific requirements.                        |
| build_config             | Builds and configures the interface based on  |
|                          | attributes set on this interface object.      |
| build_unconfig           | Builds and unconfigures the interface based on|
|                          | attributes set on this interface object.      |
| build_modify             | Only modifies a section of the configuration  |
|                          | based on the kwargs passed to the function.   |
| add_feature              | Adds a feature (Feature object) to            |
|                          | this interface.                               |
| remove_feature           | Removes a feature (Feature object) from       |
|                          | this interface.                               |
+==========================================================================+
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># import modules</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">Link</span>

<span class="c1"># Create a Testbed</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myTestbed&#39;</span><span class="p">)</span>

<span class="c1"># Create two devices</span>
<span class="c1"># Adding testbed=testbed automatically bind the devices to the testbed.</span>
<span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">dev2</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;helper&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>

<span class="c1"># Let&#39;s add a few interfaces to each device</span>
<span class="c1"># Adding device=&lt;dev object&gt; automatically bind the interface to a device</span>
<span class="c1"># __new__ returns the right type depending on the name</span>
<span class="n">intf1_dev1</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PE1_1&#39;</span><span class="p">])</span>
<span class="n">intf2_dev1</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;loopback1&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PE1_2&#39;</span><span class="p">])</span>
<span class="n">intf2_dev2</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;vlan1&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;P1&#39;</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">intf1_dev1</span>
<span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e3f22c</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">intf2_dev1</span>
<span class="o">&lt;</span><span class="n">LoopbackInterface</span> <span class="nb">object</span> <span class="s1">&#39;loopback1&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6de526c</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">intf2_dev2</span>
<span class="o">&lt;</span><span class="n">VlanInterface</span> <span class="nb">object</span> <span class="s1">&#39;vlan1&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6de5f8c</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An interface of the correct type for the right os must exist in
genie_libs/conf/interface, otherwise <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseInterface</span></code> will be
returned.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Interface object inherits from <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/topology/concept.html#interface-objects">pyats interface</a> hence having all its features and functionalities.</p>
</div>
</div>
<div class="section" id="link-object">
<span id="link"></span><h2>Link Object<a class="headerlink" href="#link-object" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Link</span></code> object is a connection between two or more <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> within
a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Testbed</span></code>. More than two <code class="xref py py-obj docutils literal notranslate"><span class="pre">Interface</span></code> can be interconnected using a L2 switches.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
| Link object                                                              |
+==========================================================================+
| Attributes               | Description                                   |
|--------------------------+-----------------------------------------------|
| name                     | Links name, should be unique                  |
| aliases                  | Lists of aliases for the link. Useful for     |
|                          | recognizing links.                            |
| features                 | Lists features to configure on the devices.   |
| obj_state                | States of the object link. Must be            |
|                          | set manually.                                 |
| interfaces               | Weaklist of interfaces that are a part of     |
|                          | this link.                                    |
| testbed                  | Parent testbed object. Internally it          |
|                          | is a weakref.                                 |
| devices                  | Tuple of devices. Taken from the interfaces   |
|                          | in the link                                   |
+==========================================================================+
| Methods                  | Description                                   |
|--------------------------+-----------------------------------------------|
| connect_interface        | Connects an interface to this link            |
| disconnect_interface     | Disconnects an interface to this link         |
| find_interfaces          | Returns interfaces (Interface object) of      |
|                          | this link with specific requirements          |
| find_features            | Returns features objects of this link with    |
|                          | specific requirements.                        |
| add_feature              | Adds a feature (Feature object) to            |
|                          | this link.                                    |
| remove_feature           | Removes a feature (Feature object) from       |
|                          | this link.                                    |
+==========================================================================+
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># import modules</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">Link</span>

<span class="c1"># Create a Testbed</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myTestbed&#39;</span><span class="p">)</span>

<span class="c1"># Create two devices</span>
<span class="c1"># Adding testbed=testbed automatically bind the devices to the testbed.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev2</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;helper&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>

<span class="c1"># Let&#39;s add an interface for each device</span>
<span class="c1"># Adding device=&lt;dev object&gt; automatically bind the interface to a device</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">intf_dev1</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PE1&#39;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">intf_dev2</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;P1&#39;</span><span class="p">])</span>

<span class="c1"># Now some link to connect those 2 interfaces</span>
<span class="c1"># A link must be part of a testbed</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">link1</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;dev1-dev2-1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;used link&#39;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf_dev1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf_dev2</span><span class="p">)</span>

<span class="c1"># Check all interfaces under link</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">link1</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6f0c22c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6eb226c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Find an interface that has name Ethernet3/7, and is part of device PE1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">link1</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device__name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ed322c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Let&#39;s remove this interface</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">link1</span><span class="o">.</span><span class="n">disconnect_interface</span><span class="p">(</span><span class="n">link1</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span>
                                                 <span class="n">device__name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span>
                                                 <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Check after disconnect</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">link1</span><span class="o">.</span><span class="n">find_interfaces</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">EthernetInterface</span> <span class="nb">object</span> <span class="s1">&#39;Ethernet3/7&#39;</span> <span class="n">on</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6eb226c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># To add a feature, add_feature(&lt;feature object&gt;) would do it.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Link object inherits from <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/topology/concept.html#link-objects">pyats link</a> hence having all its features and functionalities.</p>
</div>
</div>
<div class="section" id="find-api">
<span id="find"></span><h2>Find Api<a class="headerlink" href="#find-api" title="Permalink to this headline">¶</a></h2>
<p>All of <code class="docutils literal notranslate"><span class="pre">Genie</span></code>’s base classes include <code class="xref py py-obj docutils literal notranslate"><span class="pre">find</span></code> mechanisms, which means users may lookup
particular objects that meet their specific requirements. This is a very powerful mechanism
for all users.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Genie</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">find</span></code> method is a wrapper on top of <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/utilities/helper_functions.html#find">pyats find</a>, with extended
functionality. Please refer to the <code class="docutils literal notranslate"><span class="pre">pyats</span></code> documentation for a better understanding of  <a class="reference external" href="http://wwwin-pyats.cisco.com/documentation/latest/utilities/helper_functions.html#find">pyats find</a> APIs.</p>
<p>Let’s use the following topology as our playground to understand how the <code class="docutils literal notranslate"><span class="pre">Genie</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">find</span></code>
method works.</p>
<div class="figure align-center">
<img alt="find_topology" src="../../../_images/find_topology.png" />
</div>
<p>The following topology has three <code class="xref py py-obj docutils literal notranslate"><span class="pre">Device`s,</span> <span class="pre">which</span> <span class="pre">have</span> <span class="pre">four</span> <span class="pre">`Interface`s</span> <span class="pre">each,</span> <span class="pre">and</span> <span class="pre">four</span>
<span class="pre">`Link`s</span> <span class="pre">interconnecting</span> <span class="pre">each</span> <span class="pre">`device</span></code>. Of course, this is all within a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Testbed</span></code>.
Let’s represent it using <code class="docutils literal notranslate"><span class="pre">Genie</span></code> objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">BaseInterface</span><span class="p">,</span> <span class="n">Link</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">()</span>

<span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">dev2</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE2&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;helper&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">dev3</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;P&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>

<span class="n">intf1_dev1</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet1/1&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">)</span>
<span class="n">intf2_dev1</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet1/2&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">)</span>
<span class="n">intf3_dev1</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet2/1&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">)</span>
<span class="n">intf4_dev1</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet2/2&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev1</span><span class="p">)</span>

<span class="n">intf1_dev2</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/1&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">)</span>
<span class="n">intf2_dev2</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/2&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">)</span>
<span class="n">intf3_dev2</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/6&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">)</span>
<span class="n">intf4_dev2</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet3/7&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev2</span><span class="p">)</span>

<span class="n">intf1_dev3</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet1/1&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev3</span><span class="p">)</span>
<span class="n">intf2_dev3</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet1/5&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev3</span><span class="p">)</span>
<span class="n">intf3_dev3</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet2/1&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev3</span><span class="p">)</span>
<span class="n">intf4_dev3</span> <span class="o">=</span> <span class="n">BaseInterface</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ethernet2/2&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dev3</span><span class="p">)</span>

<span class="n">link1</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1-P1-1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">)</span>
<span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf1_dev1</span><span class="p">)</span>
<span class="n">link1</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf1_dev3</span><span class="p">)</span>

<span class="n">link2</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1-P1-2&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">)</span>
<span class="n">link2</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf2_dev1</span><span class="p">)</span>
<span class="n">link2</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf2_dev3</span><span class="p">)</span>

<span class="n">link3</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1-PE2-1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">)</span>
<span class="n">link3</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf3_dev1</span><span class="p">)</span>
<span class="n">link3</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf1_dev2</span><span class="p">)</span>

<span class="n">link4</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1-PE2-2&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">)</span>
<span class="n">link4</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf4_dev1</span><span class="p">)</span>
<span class="n">link4</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf2_dev2</span><span class="p">)</span>

<span class="n">link5</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1-PE2-1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">)</span>
<span class="n">link5</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf3_dev2</span><span class="p">)</span>
<span class="n">link5</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf3_dev3</span><span class="p">)</span>

<span class="n">link6</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;P1-PE2-2&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">)</span>
<span class="n">link6</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf4_dev2</span><span class="p">)</span>
<span class="n">link6</span><span class="o">.</span><span class="n">connect_interface</span><span class="p">(</span><span class="n">intf4_dev3</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, let’s use this topology to demonstrate how <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_...</span></code> method works.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Testbed object containing this topology.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span>
<span class="o">&lt;</span><span class="n">Testbed</span> <span class="nb">object</span> <span class="kc">None</span> <span class="n">at</span> <span class="mh">0xf764f0cc</span><span class="o">&gt;</span>

<span class="c1"># Let&#39;s find all the link on this testbed</span>
<span class="c1"># 6 links as expected</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;P1-PE2-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df31ec</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;P1-PE2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df318c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-PE2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df30cc</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df302c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-PE2-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df312c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df266c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># And let&#39;s get the name of those links, just to verify</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">():</span> <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="n">PE1</span><span class="o">-</span><span class="n">PE2</span><span class="o">-</span><span class="mi">2</span>
<span class="n">PE1</span><span class="o">-</span><span class="n">P1</span><span class="o">-</span><span class="mi">1</span>
<span class="n">P1</span><span class="o">-</span><span class="n">PE2</span><span class="o">-</span><span class="mi">1</span>
<span class="n">P1</span><span class="o">-</span><span class="n">PE2</span><span class="o">-</span><span class="mi">2</span>
<span class="n">PE1</span><span class="o">-</span><span class="n">P1</span><span class="o">-</span><span class="mi">2</span>
<span class="n">PE1</span><span class="o">-</span><span class="n">PE2</span><span class="o">-</span><span class="mi">1</span>

<span class="c1"># All find can return a specific number of items via count</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;P1-PE2-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df31ec</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;P1-PE2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df318c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-PE2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df30cc</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># I would not even try</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">(</span><span class="n">count</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">count</span> <span class="n">can</span> <span class="n">only</span> <span class="n">a</span> <span class="n">positive</span> <span class="n">number</span><span class="o">.</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">positive</span><span class="o">.</span>
</pre></div>
</div>
<p>All of the previous examples are supported by all <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_</span></code> methods:  <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_links</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">find_devices</span></code> and  <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_interfaces</span></code>.</p>
<p>The next set of examples demonstrate how users may
filter lists or dictionaries of objects contained inside the object which
owned the method.  For example, <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_devices</span></code> is owned by <code class="xref py py-obj docutils literal notranslate"><span class="pre">Testbed</span></code>, and it
allows to filter the list or dictionary of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Device</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Requires the devices that has name &#39;PE1&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ee9aac</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Requires a device name that does not exists</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;NotReal&#39;</span><span class="p">)</span>
<span class="p">[]</span>

<span class="c1"># It also support pyATS logic</span>
<span class="kn">from</span> <span class="nn">pyats.datastructures.logic</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Not</span><span class="p">,</span> <span class="n">Or</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">Or</span><span class="p">(</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="s1">&#39;P1&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ee9aac</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e8e64c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">Not</span><span class="p">(</span><span class="s1">&#39;PE1&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE2&#39;</span> <span class="n">at</span> <span class="mh">0xf6e8e28c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e8e64c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># You can ask for many requirements. It can be read like this</span>
<span class="c1"># Find all the devices that have a name that is not PE1 and</span>
<span class="c1"># their alias is helper</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">Not</span><span class="p">(</span><span class="s1">&#39;PE1&#39;</span><span class="p">),</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;helper&#39;</span><span class="p">])</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE2&#39;</span> <span class="n">at</span> <span class="mh">0xf6e8e28c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">Not</span><span class="p">(</span><span class="s1">&#39;PE1&#39;</span><span class="p">),</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">])</span>
<span class="p">[]</span>
</pre></div>
</div>
<p>We can see it loop through each device part of this testbed, verify if
there is an attribute <code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code> and make sure it equals the right value, or the
callable is <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code>. Of course many attributes can be requested, and all those
have to be <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> or equal to the right values.</p>
<p>We will see more advanced requirements in the examples below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s see an example, where we will chain the request.</span>
<span class="c1"># We want to find all links that have an interface belonging to device PE1</span>

<span class="c1"># This requirement cannot be figured out by just checking the link itself,</span>
<span class="c1"># but needs to verify link.interfaces[x].device.name , where x loops through</span>
<span class="c1"># all interfaces. However, you cannot pass this as a keyword</span>
<span class="c1"># argument. So a new syntax was born.</span>

<span class="c1"># interfaces[x].device.name = interfaces__device__name</span>
<span class="c1"># This syntax is smart enough to recognize list, if it is</span>
<span class="c1"># then it will loop through each element.</span>

<span class="c1"># Return all the link that has at least an interface</span>
<span class="c1"># that is part of device PE1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">(</span><span class="n">interfaces__device__name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-PE2-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df312c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df302c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df266c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-PE2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df30cc</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># As another example;</span>
<span class="c1"># Let&#39;s find all the device that have an interface part of PE1-P1-1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_devices</span><span class="p">()</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE1&#39;</span> <span class="n">at</span> <span class="mh">0xf6ee9aac</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;PE2&#39;</span> <span class="n">at</span> <span class="mh">0xf6e8e28c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Device</span> <span class="nb">object</span> <span class="s1">&#39;P1&#39;</span> <span class="n">at</span> <span class="mh">0xf6e8e64c</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>This new syntax can be chained and it can retrieve any arguments.</p>
<p>Lastly, let’s explore the <code class="xref py py-obj docutils literal notranslate"><span class="pre">R</span></code> class which stands for <code class="xref py py-obj docutils literal notranslate"><span class="pre">Requirement</span></code>. <code class="xref py py-obj docutils literal notranslate"><span class="pre">R</span></code> allows
a user to create many requirements, where each requirement must be true for an
object be a part of the return list. For example, let’s say the user wants to
find a link that is a part of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Device</span></code> PE1 and <code class="xref py py-obj docutils literal notranslate"><span class="pre">Device</span></code> P1. This requirement
cannot be done using the current syntax, but requires to mention; I need a
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Link</span></code> that has <code class="xref py py-obj docutils literal notranslate"><span class="pre">device.name</span> <span class="pre">=</span> <span class="pre">Pe1</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">device.name</span> <span class="pre">=</span> <span class="pre">P1</span></code>, which are two
requirements, in order to
achieve this result.</p>
<p>Now let’s see <code class="xref py py-obj docutils literal notranslate"><span class="pre">R</span></code> in action:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s find all the links that are part of PE1 and P1</span>
<span class="kn">from</span> <span class="nn">pyats.utils.objects</span> <span class="kn">import</span> <span class="n">R</span>

<span class="c1"># The first R will get all the links that contains PE1</span>
<span class="c1"># The second R will get all the links that contains P1</span>
<span class="c1"># And then lastly only the intersection of both list will be returned</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">(</span><span class="n">R</span><span class="p">(</span><span class="n">interfaces__device__name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">),</span>
                       <span class="n">R</span><span class="p">(</span><span class="n">interfaces__device__name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df302c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df266c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># In case you are wondering, those will not work</span>
<span class="c1"># This will raise an exception; a function cannot be called</span>
<span class="c1"># with the same arguments.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">(</span><span class="n">interfaces__device__name</span><span class="o">=</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span>
                       <span class="n">interfaces__device__name</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">)</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">keyword</span> <span class="n">argument</span> <span class="n">repeated</span>


<span class="c1"># This will return the links that have an interface that are part of PE1</span>
<span class="c1"># OR part of P1, but not an intersection</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">(</span><span class="n">interfaces__device__name</span><span class="o">=</span><span class="n">Or</span><span class="p">(</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="s1">&#39;P1&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;P1-PE2-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df31ec</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;P1-PE2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df318c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-PE2-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df30cc</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df302c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-PE2-2&#39;</span> <span class="n">at</span> <span class="mh">0xf6df312c</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">Link</span> <span class="nb">object</span> <span class="s1">&#39;PE1-P1-1&#39;</span> <span class="n">at</span> <span class="mh">0xf6df266c</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># This will return the links that have an interface that are part of</span>
<span class="c1"># PE1 and P1,  which is none.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">find_links</span><span class="p">(</span><span class="n">interfaces__device__name</span><span class="o">=</span><span class="n">And</span><span class="p">(</span><span class="s1">&#39;PE1&#39;</span><span class="p">,</span> <span class="s1">&#39;P1&#39;</span><span class="p">))</span>
<span class="p">[]</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="feature.html" class="btn btn-neutral float-right" title="Feature" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Conf User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Cisco Systems Inc.
      <span class="lastupdated">
        Last updated on Dec 22, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>