

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>First Steps &mdash; Genie Documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/asciinema-player.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/genie_ico.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/asciinema-player.js"></script>
        <script src="../../../_static/tracker.js"></script>
        <script src="../../../_static/embed_version.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Attributes helper" href="attributeshelper.html" />
    <link rel="prev" title="Conf Developer Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> pyATS Library: Genie
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cookbooks/index.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Conf Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../user/index.html">Conf User Guide</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Conf Developer Guide</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">First Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="attributeshelper.html">Attributes helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="clibuilder.html">Cli Config Builder</a></li>
<li class="toctree-l4"><a class="reference internal" href="managedattribute.html">Managed Attribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="abstraction.html">Abstraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="final.html">Final Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="uml.html">UML</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Ops/index.html">Ops Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../harness/index.html">Harness Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../robot/index.html">RobotFramework Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../genietelemetry/integration.html">GenieTelemetry Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../apis/index.html">API Guidelines and good practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../utils/index.html">Useful Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../clean/index.html">pyATS Clean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../health/index.html">pyATS Health Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli/index.html">Genie Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../solutions/index.html">Genie Solutions</a></li>
</ul>
<p class="caption"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">Available APIs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/models">Available Models (Conf/Ops)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">Available Parsers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">Available Triggers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/verifications">Available Verifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../abstract/index.html">Library Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../metaparser/index.html">Metaparsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parsergen/index.html">CLI Auto-Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../predcore/index.html">Predicates</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../roadmap/index.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/index.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pyATS Library: Genie</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">User Guide</a> &raquo;</li>
        
          <li><a href="../index.html">Conf Guide</a> &raquo;</li>
        
          <li><a href="index.html">Conf Developer Guide</a> &raquo;</li>
        
      <li>First Steps</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="first-steps">
<span id="new-feature"></span><h1>First Steps<a class="headerlink" href="#first-steps" title="Permalink to this headline">¶</a></h1>
<p>This section focuses on developing a brand new configurable <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code>.</p>
<p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> is a device component that can be configured. The configuration of
this <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> is driven via object attributes.</p>
<p>Read each section in order, as each new concepts builds on top of previously
explained concept.</p>
<p>This documentation is meant to be interactive. Every block of code is
executable in your pyATS virtual environment. All you need to do is activate
your virtual environment, and make sure <code class="docutils literal notranslate"><span class="pre">Genie</span></code> is installed. Then go in
python interactive shell to paste the code in there.  This allow to read,
and run the code to get a better understanding. You can also modify the code
and learn this way.</p>
<div class="section" id="configurable-feature">
<h2>Configurable Feature<a class="headerlink" href="#configurable-feature" title="Permalink to this headline">¶</a></h2>
<p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> is stored into a python module, which contains a class with the
specific <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> name. This class must inherit from either <code class="xref py py-obj docutils literal notranslate"><span class="pre">LinkFeature</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">InterfaceFeature</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">DeviceFeature</span></code>, or any combination of those classes.</p>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">LinkFeature</span></code> is used when this <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> can be applied on a link.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">DeviceFeature</span></code> is used when this <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> can be applied on a Device.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">InterfaceFeature</span></code> is used when this <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> can be applied on an
Interface.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">genie.conf.base.base</span> <span class="kn">import</span> <span class="n">DeviceFeature</span><span class="p">,</span> <span class="n">LinkFeature</span>
<span class="c1"># A Vrf is a feature that is configured on a device</span>
<span class="k">class</span> <span class="nc">Vrf</span><span class="p">(</span><span class="n">DeviceFeature</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># Ldp can be configured on a single device, or</span>
<span class="c1"># on all devices connected to this link</span>
<span class="k">class</span> <span class="nc">Ldp</span><span class="p">(</span><span class="n">DeviceFeature</span><span class="p">,</span> <span class="n">LinkFeature</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>All code in those examples are executable. This allows you to play
with the code as you read. When the code is too long to be
posted on the website, a download location is provided.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>To execute those example, source your virtual environment,
type python, and paste the code in there.</p>
</div>
<p>Let’s add some attributes to our <code class="xref py py-obj docutils literal notranslate"><span class="pre">Vrf</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code>. The simplest way is to add
<code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code> method which only contains the configurable attributes for this
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Vrf</span></code>. By default all of them should be set to <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, unless there is a
reason to assign them to another value. As an extra functionality to the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> objects, any <code class="xref py py-obj docutils literal notranslate"><span class="pre">**kwargs</span></code> passed to <code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code> will be automatically
stored into the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Vrf</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#### Imports ####</span>
<span class="kn">from</span> <span class="nn">genie.conf</span> <span class="kn">import</span> <span class="n">Genie</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Device</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span>
<span class="kn">from</span> <span class="nn">genie.conf.base.base</span> <span class="kn">import</span> <span class="n">DeviceFeature</span>

<span class="c1">#### VRF class ####</span>
<span class="k">class</span> <span class="nc">Vrf</span><span class="p">(</span><span class="n">DeviceFeature</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vrf</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Call back parent&#39;s __init__</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="c1">#### Main section ####</span>
<span class="c1"># Set Genie Tb</span>
<span class="kn">from</span> <span class="nn">genie.conf</span> <span class="kn">import</span> <span class="n">Genie</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">()</span>
<span class="n">Genie</span><span class="o">.</span><span class="n">testbed</span> <span class="o">=</span> <span class="n">testbed</span>
<span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;pe1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">vrf1</span> <span class="o">=</span> <span class="n">Vrf</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">vrf1</span><span class="o">.</span><span class="n">description</span>
<span class="c1"># None</span>
<span class="n">vrf1</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;vrf_blue&#39;</span>
<span class="n">vrf1</span><span class="o">.</span><span class="n">description</span>
<span class="c1"># vrf_blue</span>
<span class="n">vrf1</span> <span class="o">=</span> <span class="n">Vrf</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;vrf_blue&#39;</span><span class="p">,</span>
           <span class="n">extra_args</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="n">vrf1</span><span class="o">.</span><span class="n">description</span>
<span class="c1"># vrf_blue</span>
<span class="n">vrf1</span><span class="o">.</span><span class="n">extra_args</span>
<span class="c1"># 13</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> __init__ must call its parent class with <code class="xref py py-obj docutils literal notranslate"><span class="pre">super</span></code>, otherwise some
functionalities will be lost.</p>
</div>
<p>Now, that we have seen how to set attributes in <code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code>, let’s discuss how
to use those attributes to configure and unconfigure our <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code>. For
the next sections, only configuring will be used to keep everything simple,
but exactly the same concept apply to unconfig. Final example with unconfig
is available in <a class="reference internal" href="managedattribute.html#managedattribute"><span class="std std-ref">Managed Attribute</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">build_config</span></code> is a method that generates and adds configuration for a
specific <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code>. It must satisfy a few requirements :</p>
<p id="requirement">All attributes of the feature is used to build the feature, unless specific
argument are passed via the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Attributes</span></code>. Then only those are used.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Attributes of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> drive the configuration, unless argument
<code class="xref py py-obj docutils literal notranslate"><span class="pre">attributes</span></code> is passed to the method. Then <code class="xref py py-obj docutils literal notranslate"><span class="pre">attributes</span></code> control what get
configured. (See note below)</p></li>
<li><p>Mechanism to propagate attribute through multiple object level.</p></li>
<li><p>By Default, the configuration will be applied on the devices when the api
is called. Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">apply=False</span></code> will instead return a dictionary.</p></li>
<li><p>Mechanism to configure only specific devices.</p></li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Regarding the first requirement, the argument <code class="xref py py-obj docutils literal notranslate"><span class="pre">attributes</span></code> is used to
modify the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> instead of reconfiguring the whole <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code>. Please
refer to the <span class="xref std std-ref">attributes</span> section for more information.</p>
</div>
<p>With these requirement in mind, here is how to write a basic <code class="docutils literal notranslate"><span class="pre">build_config</span></code>
for a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code>, fully implemented in Python, without any magic …. yet.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#### Imports ####</span>
<span class="kn">from</span> <span class="nn">genie.conf</span> <span class="kn">import</span> <span class="n">Genie</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Device</span>
<span class="kn">from</span> <span class="nn">genie.conf.base</span> <span class="kn">import</span> <span class="n">Testbed</span>
<span class="kn">from</span> <span class="nn">genie.conf.base.base</span> <span class="kn">import</span> <span class="n">DeviceFeature</span>

<span class="c1">#### Vrf class ####</span>
<span class="k">class</span> <span class="nc">Vrf</span><span class="p">(</span><span class="n">DeviceFeature</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">def</span> <span class="nf">build_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">devices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">apply</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># Allow to pass a list of Devices,</span>
        <span class="c1"># then only those devices will be configured</span>
        <span class="c1"># Requirement 4</span>
        <span class="k">if</span> <span class="n">devices</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">devices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">devices</span>
        <span class="c1"># Make sure we remove duplicate device (in case)</span>
        <span class="n">devices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span>
        <span class="c1"># Hold the configuration for each device in a separate key of the</span>
        <span class="c1"># dictionary.</span>
        <span class="n">cfgs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
            <span class="c1"># List containing configuration for this loop</span>
            <span class="c1"># will be added to cfgs</span>
            <span class="n">cfg</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># Configure vrf on the device</span>
            <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;vrf </span><span class="si">{name}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="c1"># Requirement 1</span>
            <span class="c1"># Let the configurable_attributes drive the configuration</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                <span class="c1"># Configure description on the device</span>
                <span class="c1"># with an indendation for the config</span>
                <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; description </span><span class="si">{description}</span><span class="s1">&#39;</span><span class="o">.</span>
                            <span class="nb">format</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;rd&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">:</span>
                <span class="c1"># Configure rd on the device</span>
                <span class="c1"># with an indendation for the config</span>
                <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; rd </span><span class="si">{rd}</span><span class="s1">&#39;</span><span class="o">.</span>
                            <span class="nb">format</span><span class="p">(</span><span class="n">rd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">))</span>
            <span class="n">cfgs</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">cfg</span>
        <span class="c1"># Requirement 3</span>
        <span class="k">if</span> <span class="n">apply</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cfgs</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="p">]:</span>
                    <span class="n">device</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">cfgs</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cfgs</span>

<span class="c1">#### Main section ####</span>
<span class="c1"># Set Genie Tb</span>
<span class="n">testbed</span> <span class="o">=</span> <span class="n">Testbed</span><span class="p">()</span>
<span class="n">Genie</span><span class="o">.</span><span class="n">testbed</span> <span class="o">=</span> <span class="n">testbed</span>
<span class="n">dev1</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;pe1&#39;</span><span class="p">,</span> <span class="n">testbed</span><span class="o">=</span><span class="n">testbed</span><span class="p">,</span> <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">vrf1</span> <span class="o">=</span> <span class="n">Vrf</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vrf1</span><span class="o">.</span><span class="n">build_config</span><span class="p">(</span><span class="n">devices</span><span class="o">=</span><span class="p">[</span><span class="n">dev1</span><span class="p">],</span> <span class="n">apply</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="c1"># {&#39;pe1&#39;: [&#39;vrf blue&#39;]}</span>

<span class="c1"># Let&#39;s add a description</span>
<span class="n">vrf1</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;vrf_blue&#39;</span>
<span class="n">vrf1</span><span class="o">.</span><span class="n">rd</span> <span class="o">=</span> <span class="s1">&#39;800:1&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vrf1</span><span class="o">.</span><span class="n">build_config</span><span class="p">(</span><span class="n">devices</span><span class="o">=</span><span class="p">[</span><span class="n">dev1</span><span class="p">],</span> <span class="n">apply</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="c1"># {&#39;pe1&#39;: [&#39;vrf blue&#39;, &#39; description vrf_blue&#39;, &#39; rd 800:1&#39;]}</span>
</pre></div>
</div>
<p>The above example satisfy most of the above requirement for <code class="docutils literal notranslate"><span class="pre">build_config</span></code>,
except requirement 1 and 2 which are not fully satisfied.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Attributes of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> drive the configuration, unless argument
<code class="xref py py-obj docutils literal notranslate"><span class="pre">attributes</span></code> is passed to the method. Then <code class="xref py py-obj docutils literal notranslate"><span class="pre">attributes</span></code> control what get
configured.</p></li>
<li><p>The same feature object can be associated with multiple objects, such as
device, address families, this association allows any attributes set at the
feature, or any level, to also propagate to the object the feature were
associated with.</p></li>
</ol>
</div></blockquote>
<p>The next section will demonstrated how to do so.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Take a moment to understand fully the above example and run it once in your
terminal, it is the foundation that we will build the rest of Genie
configuration <code class="xref py py-obj docutils literal notranslate"><span class="pre">Feature</span></code> object on.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="attributeshelper.html" class="btn btn-neutral float-right" title="Attributes helper" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Conf Developer Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Cisco Systems Inc.
      <span class="lastupdated">
        Last updated on Dec 22, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>