

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>April 2020 &mdash; Genie Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/asciinema-player.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/genie_ico.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/asciinema-player.js"></script>
        <script src="../../_static/tracker.js"></script>
        <script src="../../_static/embed_version.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="February 2020" href="february.html" />
    <link rel="prev" title="May 2020" href="may.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> pyATS Library: Genie
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbooks/index.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userguide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../clean/index.html">pyATS Clean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../health/index.html">pyATS Health Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">Genie Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/index.html">Genie Solutions</a></li>
</ul>
<p class="caption"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">Available APIs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/models">Available Models (Conf/Ops)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">Available Parsers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">Available Triggers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/verifications">Available Verifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../abstract/index.html">Library Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metaparser/index.html">Metaparsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parsergen/index.html">CLI Auto-Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../predcore/index.html">Predicates</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../roadmap/index.html">Roadmap</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Changelog</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="october.html">October 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="sept.html">September 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="august.html">August 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="july.html">July 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="june.html">June 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="may.html">May 2020</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">April 2020</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#april-28th-genie-v20-4">April 28th - Genie v20.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#upgrade-instructions">Upgrade Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#features">Features:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="february.html">February 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="january.html">January 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/december.html">December 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/november.html">November 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/october.html">October 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/september.html">September 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/august.html">August 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/july.html">July 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/june.html">June 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/may.html">May 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/april.html">April 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/march.html">March 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/february.html">February 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2019/january.html">January 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/december.html">December 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/november.html">November 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/october.html">October 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/august.html">August 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/july.html">July 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/june.html">June 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/may.html">May 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2018/april.html">April 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2017/october.html">October 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2017/august.html">August 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2017/july.html">July 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2017/may.html">May 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2017/march.html">March 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/december.html">December 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/november.html">November 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/july.html">July 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/may.html">May 2016</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pyATS Library: Genie</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Changelog</a> &raquo;</li>
        
      <li>April 2020</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="april-2020">
<h1>April 2020<a class="headerlink" href="#april-2020" title="Permalink to this headline">¶</a></h1>
<div class="section" id="april-28th-genie-v20-4">
<h2>April 28th - Genie v20.4<a class="headerlink" href="#april-28th-genie-v20-4" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 53%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Versions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.conf</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.filetransferutils</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.ops</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.parser</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.robot</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.libs.sdk</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">genie.telemetry</span></code></p></td>
<td><p>20.4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">genie.trafficgen</span></code></p></td>
<td><p>20.4</p></td>
</tr>
</tbody>
</table>
<div class="section" id="upgrade-instructions">
<h3>Upgrade Instructions<a class="headerlink" href="#upgrade-instructions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install --upgrade ats<span class="o">[</span>full<span class="o">]</span> <span class="c1"># For internal user</span>
pip install --upgrade pyats<span class="o">[</span>full<span class="o">]</span> <span class="c1"># For DevNet user</span>
</pre></div>
</div>
<p>Note that this will leave older v19.12 packages around in pip list, but it will
not impact anything (visual only).  An update command can be used to clean up
these packages</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyats version update
</pre></div>
</div>
</div>
<div class="section" id="features">
<h3>Features:<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<p>This month we are releasing a brand new package within the pyATS libraries
Umbrella.</p>
<p>Built on top of the pyATS Kleenex infrastructure, the new pyATS clean library
enables you to restore your testbed’s devices to a known-good state by loading
your specified image and configuration. It can be added to any existing pyATS
script with using just a few additional arguments.</p>
<p>Build like Lego building blocks, pyATS clean is highly modular. You can add,
remove and modify any stages, including customizing your own clean stage
anywhere in the process! This gives it the flexibility to support a variety of
platforms, each with its own tailored clean process/portfolio.</p>
<p>pyATS Clean is simplistic, the library is designed so you can use one clean
yaml structure for all your devices - regardless of operating system and
platforms.</p>
<p>It currently supports IOSXE and NXOS with IOSXR coming next month.</p>
<p>For the first time, Clean logs are now easy to view and debug thanks to Xpresso
and our pyATS Logviewer. The logs and results can be viewed live as the run
happens by adding the <code class="docutils literal notranslate"><span class="pre">--liveview</span></code> argument to the pyats run command and
visiting <a class="reference external" href="http://localhost:8080/">http://localhost:8080/</a>.</p>
<p>pyATS Clean is the official Cleaner and it is replacing Uniclean, and older Tcl
cleans (easypyclean, ngclean). These cleans are now End Of Life and End Of
Support.</p>
<p>You can find many examples in our <a class="reference external" href="https://github.com/CiscoTestAutomation/examples/tree/master/clean">Github repo</a>.</p>
<p>For more information you can visit our <a class="reference internal" href="../../clean/index.html#clean"><span class="std std-ref">website</span></a> or reach out to us
at: <a class="reference external" href="mailto:pyats-support&#37;&#52;&#48;cisco&#46;com">pyats-support<span>&#64;</span>cisco<span>&#46;</span>com</a></p>
<p><strong>Genie</strong></p>
<ul class="simple">
<li><p>device.parse support short form clis, for example: <code class="xref py py-obj docutils literal notranslate"><span class="pre">show</span> <span class="pre">ver</span></code> for show version</p></li>
<li><p>device.parse supports fuzzy search, for example <code class="xref py py-obj docutils literal notranslate"><span class="pre">show</span> <span class="pre">bgp.*</span></code> to execute all
show commands which begins with show bgp</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># No need to send the specific show command, you can</span>
<span class="c1"># abbreviate like on the devices!</span>
<span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show ver&#39;</span><span class="p">)</span>

<span class="c1"># Use fuzzy for even more powerful parsers</span>
<span class="c1"># Send all parser which starts with show bgp</span>
<span class="c1"># Will return a dictionary of all show commands with their values</span>
<span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show bgp.*&#39;</span><span class="p">,</span> <span class="n">fuzzy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Dq handles regex query inputs</p></li>
<li><p>Dq - removed ‘contains_key_value_in_list’ and
‘not_contains_key_value_in_list’ as those are now handled within contains</p></li>
<li><p>Dq - Updated to return empty in case index for get_values is out of range</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if the module in line card #4 contains a status</span>
<span class="c1"># and its value is ok or active</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">output</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;lc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">contains_key_value</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;ok|active&#39;</span><span class="p">,</span> <span class="n">value_regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;lc&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;4&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;NX-OSv Ethernet Module&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">}}}})</span>
</pre></div>
</div>
<p>Full examples in our <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/userguide/utils/index.html#dq">DQ documentation</a>.</p>
<ul class="simple">
<li><p>Fixed discovery for sections in trigger</p></li>
<li><p>Updated loader.py to be able to call devices by their alias in markup.</p></li>
<li><p>Support verbose option for Genie
* Added verbose option for diff command by adding -v
* Added verbose support to show parsed_output in Parser by adding -v
* Added verbose support to show ops structure in Ops by adding -v</p></li>
<li><p>Changed to accept both trigger/verification_uids and _groups. When both are
provided, filtering trigger/verification by using both.</p></li>
<li><p>Extended datafile are now shown in full in the archive (.zip)</p></li>
<li><p>New support for netconf, restconf and gnmi support for Genie Harness</p></li>
<li><p>Can now run/skip testcase depending on CDET state (Cisco Employee only) with
processor pre_setup_skip_if_cdet_not_resolved</p></li>
<li><p>New nested Diff representation for list and tuple</p></li>
<li><p>Enhanced Diff to show diff strings without formatting</p></li>
<li><p>Added support for testbed object in other datafile using the markup syntax</p></li>
<li><p>Updated to load only triggers/verifications that will be executed</p></li>
<li><p>Enhance debug_plugin logic to only copy on the device specified in multiple debug plugin scenario.</p></li>
<li><p>Updated Timeout to support max_time=None and interval=None</p></li>
<li><p>Added ‘ops_schema’ to the exclude for pts comparison</p></li>
<li><p>New pyats.contrib - Allow to create testbed file from other system
<a class="reference external" href="https://github.com/CiscoTestAutomation/pyats.contrib">https://github.com/CiscoTestAutomation/pyats.contrib</a></p></li>
</ul>
<p>pyats.contrib can create pyATS testbed out of Ansible, Netbox, Excel, CSV and prompts. Here is an example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$ pyats run job /path/to/jobfile.py --testbed-file source:netbox --netbox-token<span class="o">=</span>token --netbox-url<span class="o">=</span>url
</pre></div>
</div>
<p><strong>Genie.Libs.Parser</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Dq()</span></code> is now by default a <code class="docutils literal notranslate"><span class="pre">device.parse()</span></code> return object type</p></li>
<li><p>823 new IOSXE, IOS, NXOS, IOSXR, Junos and F5  Parsers! (700 are F5)</p></li>
<li><p>Grand total of 2435 parsers</p></li>
<li><p>Changelog can be checked <a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genieparser/browse/changelog/2020/APRIL.md">here</a></p></li>
</ul>
</div></blockquote>
<p><strong>Genie.Libs.Sdk</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>49 new apis to use on your devices!</p></li>
<li><p>Moved delete plugin step in HA triggers to the CommonCleanup section</p></li>
<li><p>Changelog can be checked <a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse/pkgs/sdk-pkg/changelog/2020/APRIL.md">here</a></p></li>
</ul>
</div></blockquote>
<p><strong>Genie.Libs.Ops</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Changelog can be checked <a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse/pkgs/ops-pkg/changelog/2020/APRIL.md">here</a></p></li>
</ul>
</div></blockquote>
<p><strong>Genie.Libs.Conf</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Changelog can be checked <a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse/pkgs/conf-pkg/changelog/2020/APRIL.md">here</a></p></li>
</ul>
</div></blockquote>
<p><strong>Genie.Libs.Filetransferutils</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>No change</p></li>
</ul>
</div></blockquote>
<p><strong>Genie.Libs.Robot</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Changelog can be checked <a class="reference external" href="https://bitbucket-eng-sjc1.cisco.com/bitbucket/projects/PYATS-PYPI/repos/genielibs/browse/pkgs/robot-pkg/changelog/2020/APRIL.md">here</a></p></li>
</ul>
</div></blockquote>
<p><strong>Genie.Telemetry</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>No change</p></li>
</ul>
</div></blockquote>
<p><strong>Genie.Trafficgen</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>No change</p></li>
</ul>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="february.html" class="btn btn-neutral float-right" title="February 2020" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="may.html" class="btn btn-neutral float-left" title="May 2020" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Cisco Systems Inc.
      <span class="lastupdated">
        Last updated on Dec 22, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>